{"pageProps":{"frontmatter":{"title":"[华科]数据库实验1","description":"华中科技大学 数据库实验1","date":"2021-5-9","image":"https://s2.loli.net/2022/05/21/xBCITtd3PXU2gih.jpg"},"content":"<h1>Lab 1</h1><h2>1</h2><pre><code class=\"language-sql\">create database covid19mon;\n</code></pre><h2>2</h2><pre><code class=\"language-sql\">drop database if exists covid19mon;\r\ncreate database if not exists covid19mon;\r\nuse covid19mon;\n</code></pre><h3>表1 人员表(person)</h3><table><thead><tr><th>字段名称</th><th>数据类型</th><th>备注</th></tr></thead><tbody><tr><td>id</td><td>int</td><td>人员编号,主码,主码约束名为pk_person</td></tr><tr><td>fullname</td><td>char(20)</td><td>姓名，不可空</td></tr><tr><td>telephone</td><td>char(11)</td><td>手机号码，不可空。自己无号，填近亲属的</td></tr></tbody></table><pre><code class=\"language-sql\">\r\ncreate table person(id int not null,fullname char(20) not null,telephone char(11) not null,constraint pk_person primary key (id)\r\n);\n</code></pre><h3>表2 地点表(location)</h3><table><thead><tr><th>字段名称</th><th>数据类型</th><th>备注</th></tr></thead><tbody><tr><td>id</td><td>int</td><td>地点编号,主码,主码约束名为pk_location</td></tr><tr><td>location_name</td><td>char(20)</td><td>地点名称，不可空</td></tr></tbody></table><pre><code class=\"language-sql\">create table location(id int not null, location_name char(20) not null, constraint pk_location primary key (id));\n</code></pre><h3>表3 行程表（itinerary）</h3><table><thead><tr><th>字段名称</th><th>备注</th><th>数据类型</th></tr></thead><tbody><tr><td>id</td><td>行程编号,主码,主码约束名为pk_itinerary</td><td>int</td></tr><tr><td>p_id</td><td>人员编号,外码,外码约束名为fk_itinerary_pid</td><td>int</td></tr><tr><td>loc_id</td><td>所在地点编号，外码,外码约束为fk_itinerary_lid</td><td>int</td></tr><tr><td>s_time</td><td>到达该地点的时间</td><td>datetime</td></tr><tr><td>e_time</td><td>离开该地点的时间</td><td>datetime</td></tr></tbody></table><pre><code class=\"language-sql\">create table itinerary(id int not null, p_id int ,loc_id int, s_time datetime, e_time datetime, constraint pk_itinerary primary key (id), constraint fk_itinerary_pid foreign key(p_id) references person(id), constraint fk_itinerary_lid foreign key (loc_id) references location(id));\n</code></pre><h3>表4 诊断表（diagnose_record）</h3><table><thead><tr><th>字段名称</th><th>数据类型s</th><th>备注</th></tr></thead><tbody><tr><td>id</td><td>int</td><td>诊断编号,主码,主码约束为pk_diagnose_record</td></tr><tr><td>p_id</td><td>int</td><td>人员编号,外码,外码约束名为fk_diagnose_pid</td></tr><tr><td>diagnose_date</td><td>datetime</td><td>诊断日期</td></tr><tr><td>result</td><td>int</td><td>诊断结果。1：新冠确诊;2：无症状感染者;3：正常</td></tr></tbody></table><pre><code class=\"language-sql\">create table diagnose_record(id int not null, p_id int, diagnose_date datetime, result int, constraint pk_diagnose_record primary key (id), constraint fk_diagnose_pid foreign key (p_id) references person(id), check(result > 0 and result &#x3C; 4));\n</code></pre><h3>表5 密切接触者表（close_contact）</h3><table><thead><tr><th>字段名称</th><th>数据类型</th><th>备注</th></tr></thead><tbody><tr><td>id</td><td>int</td><td>密切接触编号,主码,主码约束名为pk_close_contact</td></tr><tr><td>p_id</td><td>int</td><td>被接触人员编号,外码,外码约束名为fk_contact_pid</td></tr><tr><td>contact_date</td><td>datetime</td><td>接触日期</td></tr><tr><td>loc_id</td><td>int</td><td>接触地点编号，外码,外码约束名为fk_contact_lid</td></tr><tr><td>case_p_id</td><td>int</td><td>病例人员编号。外码,外码约束名为fk_contact_caseid</td></tr></tbody></table><pre><code class=\"language-sql\">create table close_contact(id int not null, p_id int, contact_date datetime, loc_id int, case_p_id int, constraint pk_close_contact primary key (id), constraint fk_contact_pid foreign key(p_id) references person(id), constraint fk_contact_lid foreign key(loc_id) references location(id), constraint fk_contact_caseid foreign key(case_p_id) references person(id));\n</code></pre><h3>表6 隔离表（isolation_record）</h3><table><thead><tr><th>字段名称</th><th>数据类型</th><th>备注</th></tr></thead><tbody><tr><td>id</td><td>int</td><td>隔离编号,主码，主码约束名为pk_isolation</td></tr><tr><td>p_id</td><td>int</td><td>被隔离人员编号,外码,外码约束名为fk_isolation_pid</td></tr><tr><td>s_date</td><td>datetime</td><td>开始隔离日期</td></tr><tr><td>e_date</td><td>datetime</td><td>结束隔离日期</td></tr><tr><td>isol_loc_id</td><td>int</td><td>隔离地点编号，外码,外码约束名为fk_isolation_lid</td></tr><tr><td>state</td><td>int</td><td>隔离状态：1：正在隔离 2：隔离结束 3：转入医院</td></tr></tbody></table><p>注意：这里的隔离地点编号对应的是隔离地点表的地点编号，而不是地点表的地点编号。</p><pre><code class=\"language-sql\">create table isolation_record(id int not null, p_id int, s_date datetime, e_date datetime, isol_loc_id int, state int, constraint pk_isolation primary key(id), constraint fk_isolation_pid foreign key(p_id) references person(id), check(state>0 and state&#x3C;4));\n</code></pre><h3>表7 隔离地点表（isolation_location）</h3><table><thead><tr><th>字段名称</th><th>数据类型</th><th>备注</th></tr></thead><tbody><tr><td>id</td><td>int</td><td>隔离地点编号,主码,主码约束名为pk_isolation_loc</td></tr><tr><td>location_name</td><td>char(20)</td><td>隔离地点名</td></tr><tr><td>capacity</td><td>int</td><td>房间容量</td></tr></tbody></table><pre><code class=\"language-sql\">create table isolation_location(id int not null, location_name char(20), capacity int, constraint pk_isolation_loc primary key(id));\n</code></pre><pre><code class=\"language-sql\">alter table isolation_record add constraint fk_isolation_lid foreign key(isol_loc_id) references isolation_location(id);\n</code></pre>","renderType":"md","imageProps":{"src":"https://s2.loli.net/2022/05/21/xBCITtd3PXU2gih.jpg","width":4325,"height":1440,"type":"jpg","blurDataURL":"data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAf/xAAbEAEAAAcAAAAAAAAAAAAAAAAAAwQGBzd1tP/EABUBAQEAAAAAAAAAAAAAAAAAAAED/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAEx/9oADAMBAAIRAxEAPwC32XxpTuuk+WEAZiVf/9k="},"language":"en"},"__N_SSG":true}