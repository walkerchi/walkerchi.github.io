{"pageProps":{"frontmatter":{"title":"[华科]函数式编程实验1","description":"华中科技大学 函数式编程实验1题目与答案","date":"2021-4-7","image":"https://s2.loli.net/2022/06/18/BryAis3WRkCItMg.jpg"},"content":"<h1>Lab1</h1><h2>Q1</h2><p>下列模式能否与类型为int list的L匹配成功？如果匹配不成功，指出该模式的类型？（假设x为int类型）</p><p>x::L <em>成功</em> _::_ <em>成功</em> x::(y::L) <em>y为int时成功</em> (x::y)::L <em>语法错误</em> [x, y] <em>y为int时成功</em></p><h2>Q2</h2><p>试写出与下列表述相对应的模式。如果没有模式与其对应，试说明原因</p><p>list of length 3 lists of length 2 or 3 Non-empty lists of pairs Pairs with both components being non-empty lists</p><h2>Q3</h2><p>分析下述程序段（左边括号内为标注的行号）</p><pre><code class=\"language-sml\">val x : int = 3\r\n \t\tval temp : int = x + 1\r\n \t\tfun assemble (x : int, y : real) : int =\r\n\t\t\tlet val g : real = let val x : int = 2\r\n\t\t\t\t\t\t\tval m : real = 6.2 * (real x)\r\n\t\t\t\t\t\t\tval x : int = 9001\r\n \t\t\t\t\t\t\tval y : real = m * y\r\n\t\t\t\t\t\t  in y – m\r\n \t\t\t\t\t\t  end\r\n\t\t\tin\r\n\t\t\t  x + (trunc g)\r\n\t\t\tend\r\nval z = assemble (x, 3.0)\r\n\n</code></pre><p>试问：第4行中的x、第5行中的m和第6行中的x的声明绑定的类型和值分别为什么？第14行表达式assemble(x, 3.0)计算的结果是什么？</p><p><em>4.x:int = 2</em></p><p><em>5.m:real = 12.4</em></p><p><em>6.x:int = 9001</em></p><p><em>14.z:int = 27</em></p><h2>Q4</h2><p>指出下列代码的错误</p><ul><li><pre><code></code></pre></li></ul><p>(* pi: real *) val pi : real = 3.14159;</p><pre><code>\r\n\r\n*正确*\r\n\r\n- ```\r\n(* fact: int -> int *)\r\nfun fact (0 : int) : int = 1\r\n  | fact n = n * (fact (n - 1));\n</code></pre><p><em>正确</em></p><ul><li><pre><code>(* f : int -> int *)\r\nfun f (3 : int) : int = 9\r\n    f _ = 4;\n</code></pre><p><em>修正</em></p><pre><code>fun f(3:int):int = 9\r\n\r\n  | f _ = 4;\n</code></pre></li><li><pre><code>(* circ : real -> real *)\r\n fun circ (r : real) : real = 2 * pi * r\n</code></pre><p><em>修正</em></p><pre><code>fun circ(r:real):real = 2.0 * pi * r\n</code></pre></li><li><pre><code> (* semicirc : real -> real *)\r\n fun semicirc : real = pie * r\n</code></pre><p><em>修正</em></p><pre><code> fun semicirc (r:real):real = pi*r\n</code></pre></li><li><pre><code>(* area : real -> real *)\r\n fun area (r : int) : real = pi * r * r\n</code></pre><p><em>修正</em></p><pre><code>fun area (r:int):real = pi * real r * real r\n</code></pre></li></ul><h2>Q5</h2><p>在提示符下依次输入下列语句，观察并分析每次语句的执行结果。</p><ul><li><pre><code>3+ 4;\n</code></pre><pre><code>val it = 7 : int\n</code></pre></li><li><pre><code>3 + 2.0;\n</code></pre><pre><code>stdIn:21.1-21.6 Error: operator and operand do not agree [overload - bad instantiation]\r\noperator domain: 'Z[INT] * 'Z[INT]\r\noperand:         'Z[INT] * real\r\nin expression:\r\n  3 + 2.0\n</code></pre></li><li><pre><code>it + 6;\n</code></pre><p>缺省变量it 使用3+4的结果</p><pre><code>val it = 13 : int\n</code></pre></li><li><pre><code>val it = “hello”;\n</code></pre><pre><code>val it = \"hello\" : string\n</code></pre></li><li><pre><code>it + “ world”;\n</code></pre><pre><code>stdIn:23.4 Error: overloaded variable not defined at type\r\nsymbol: +\r\ntype: string\n</code></pre></li><li><pre><code>it + 5;\n</code></pre><pre><code>stdIn:25.1-25.6 Error: operator and operand do not agree [overload - bad instantiation]\r\noperator domain: string * string\r\noperand:         string * 'Z[INT]\r\nin expression:\r\n  it + 5\r\nstdIn:25.4 Error: overloaded variable not defined at type\r\nsymbol: +\r\ntype: string\n</code></pre></li><li><pre><code>val a = 5;\n</code></pre><pre><code>val a = 5 : int\n</code></pre></li><li><pre><code>a = 6;\n</code></pre><pre><code>val it = false : bool\n</code></pre></li><li><pre><code>a + 8; \n</code></pre><pre><code>val it = 13 : int\n</code></pre></li><li><pre><code>val twice = (fn x => 2 * x);\n</code></pre><p>匿名函数，类似JS的匿名函数和python和c++的lambda函数</p><pre><code>val twice = fn : int -> int\n</code></pre></li><li><pre><code>twice a;\n</code></pre><pre><code>val it = 10 : int\n</code></pre></li><li><pre><code>let x = 1 in x end;\n</code></pre><p>?????</p><pre><code>stdIn:1.2-37.2 Error: syntax error: deleting  LET IDA EQUALOP\r\n\r\nstdIn:42.1 Error: syntax error found at IN\n</code></pre></li><li><pre><code>foo;\n</code></pre><pre><code>stdIn:1.2-35.2 Error: unbound variable or constructor: foo\n</code></pre></li><li><pre><code>[1, “foo”];\n</code></pre><pre><code>stdIn:1.2-42.3 Error: operator and operand do not agree [overload - bad instantiation]\r\noperator domain: 'Z[INT] * 'Z[INT] list\r\noperand:         'Z[INT] * string list\r\nin expression:\r\n 1 :: \"foo\" :: nil\n</code></pre></li></ul><h2>Q6</h2><p>函数sum用于求解整数列表中所有整数的和，函数定义如下</p><pre><code>(* sum : int list -> int \t\t*)\r\n(* REQUIRES: true\t\t*)\r\n(* ENSURES: sum(L) evaluates to the sum of the integers in L. *)\r\nfun sum [ ] = 0\r\n    | sum (x ::L) = x + (sum L);\n</code></pre><p>完成函数mult的编写，实现求解整数列表中所有整数的乘积。</p><pre><code>(* mult : int list -> int \t\t*)\r\n(* REQUIRES: true\t\t*)\r\n(* ENSURES: mult(L) evaluates to the product of the integers in L. *)\r\nfun mult [ ] = \t\t(* FILL IN *)\r\n    | mult (x ::L) = \t(* FILL IN *) \r\n\n</code></pre><pre><code>fun mult [] = 0\r\n  | mult (x::L) = x*mult L;\n</code></pre>","renderType":"md","imageProps":{"src":"https://s2.loli.net/2022/06/18/BryAis3WRkCItMg.jpg","width":1920,"height":1080,"type":"jpg","blurDataURL":"data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAADAAQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAb/xAAfEAAABgEFAAAAAAAAAAAAAAAAAQIDBAURBhMhMWH/xAAUAQEAAAAAAAAAAAAAAAAAAAAG/8QAGREBAQEAAwAAAAAAAAAAAAAAAQIAERJR/9oADAMBAAIRAxEAPwCCtLl6HqC5ZZh06kFMXjdqYrpl1xlTZnjwAAN5iU5TE+9AA+b/2Q=="},"language":"cn"},"__N_SSG":true}