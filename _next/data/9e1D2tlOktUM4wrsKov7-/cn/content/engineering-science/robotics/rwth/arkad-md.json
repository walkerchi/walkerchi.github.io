{"pageProps":{"frontmatter":{"title":"[RWTHAachen]Advanced Robotic Kinematics and Dynamics","image":"https://s2.loli.net/2022/06/18/f64j5BMt8h32nPC.png","description":"outline for the content covered in ARKaD course :)","author":"mingyuan chi","date":"2022-2-1"},"content":"<h1>Position and Orientation</h1><h2>Basic</h2><ul><li><p>rotate by axis</p><div class=\"math math-display\">R_x(\\alpha)=\\left\\{\\begin{matrix}1&#x26;0&#x26;0\\\\0&#x26;cos\\alpha&#x26;-sin\\alpha\\\\0&#x26;sin\\alpha&#x26;cos\\alpha\\end{matrix}\\right\\} \\\\ R_y(\\beta)=\\left\\{\\begin{matrix}cos\\beta&#x26;0&#x26;sin\\beta\\\\0&#x26;1&#x26;0\\\\-sin\\beta&#x26;0&#x26;cos\\beta\\end{matrix}\\right\\} \\\\ R_z(\\gamma)=\\left\\{\\begin{matrix}cos\\gamma&#x26;-sin\\gamma&#x26;0\\\\sin\\gamma&#x26;cos\\gamma&#x26;0\\\\0&#x26;0&#x26;1\\end{matrix}\\right\\}</div></li><li><p>cross product</p><div class=\"math math-display\">\\begin{aligned} \\left[\\begin{matrix}u_x\\\\u_y\\\\u_z\\end{matrix}\\right]\\cross \\left[\\begin{matrix}v_x\\\\v_y\\\\v_z\\end{matrix}\\right]&#x26;= \\left[\\begin{matrix}0&#x26;-u_z&#x26;u_y\\\\u_z&#x26;0&#x26;-u_x\\\\-u_y&#x26;u_x&#x26;0\\end{matrix}\\right] \\left[\\begin{matrix}v_x\\\\v_y\\\\v_z\\end{matrix}\\right] \\\\ &#x26;=\\left[\\begin{matrix}u_yv_z-u_zv_y\\\\u_zv_x-u_xv_z\\\\u_xv_y-u_yv_x\\end{matrix}\\right] \\end{aligned}</div></li><li><p>reverse rotate</p><div class=\"math math-display\">R^{-1}=R^T</div></li><li><p>inverse matrix</p><div class=\"math math-display\">A^{-1} = \\frac{ \\left[\\begin{matrix} A_{11}^*&#x26;\\cdots &#x26;A_{1n}^*\\\\ \\vdots &#x26;\\ddots &#x26; \\vdots \\\\ A_{n1}^*&#x26;\\cdots &#x26; A_{nn}^*\\\\ \\end{matrix}\\right] }{|A|}</div><p><span class=\"math math-inline\">A_{ij}^*</span> : element of row <span class=\"math math-inline\">i</span> column <span class=\"math math-inline\">j</span> in Adjugate matrix</p><div class=\"math math-display\">A_{ij}^* = (-1)^{i+j}\\left|\\begin{matrix} a_{1,1}&#x26;\\cdots&#x26;a_{1,i-1}&#x26;a_{1,i+1}&#x26;\\cdots&#x26;a_{1,n}\\\\ \\vdots&#x26;\\ddots&#x26;\\vdots&#x26;\\vdots&#x26;\\ddots&#x26;\\vdots\\\\ a_{j-1,1}&#x26;\\cdots&#x26;a_{j-1,i-1}&#x26;a_{j-1,i+1}&#x26;\\cdots&#x26;a_{j-1,n}\\\\ a_{j+1,1}&#x26;\\cdots&#x26;a_{j+1,i-1}&#x26;a_{j+1,i+1}&#x26;\\cdots&#x26;a_{j+1,n}\\\\ \\vdots&#x26;\\ddots&#x26;\\vdots&#x26;\\vdots&#x26;\\ddots&#x26;\\vdots\\\\ a_{n,1}&#x26;\\cdots&#x26;a_{n,i-1}&#x26;a_{n,i+1}&#x26;\\cdots&#x26;a_{n,n} \\end{matrix}\\right|</div></li></ul><h2>Rotation</h2><h3>Euler Angels</h3><p>​\t12 combinations : <span class=\"math math-inline\">A_3^3+C_3^2A_2^2</span> out of 27 possibles</p><ul><li><p>current frame</p><div class=\"math math-display\">R_{cur}=R_xR_yR_z</div></li><li><p>fix frame</p><div class=\"math math-display\">\\begin{aligned} R_{fix} &#x26;= R_x(R_x^TR_yR_x)(R_x^TR_y^TR_zR_yR_x) \\\\ &#x26;=R_zR_yR_x \\end{aligned}</div></li></ul><p><strong>Roll-Pitch-Yaw</strong></p><p><strong>rotate by fix frame <span class=\"math math-inline\">x</span> ,<span class=\"math math-inline\">y</span> ,<span class=\"math math-inline\">z</span></strong></p><div class=\"math math-display\">\\begin{aligned} R_{RPY}&#x26;=R_z(\\varphi)R_y(\\theta)R_x(\\psi) \\\\ &#x26;=\\left[\\begin{matrix} c_\\varphi c_\\theta &#x26; c_\\varphi s_\\theta s_\\psi-s_\\varphi c_\\psi&#x26; c_\\varphi s_\\theta c_\\psi+s_\\varphi s_\\psi\\\\ s_\\varphi c_\\theta &#x26; s_\\varphi s_\\theta s_\\psi + c_\\varphi c_\\psi&#x26; s_\\varphi s_\\theta c_\\psi - c_\\varphi s_\\psi\\\\ -s_\\theta &#x26; c_\\theta s_\\psi&#x26; c_\\theta c_\\psi\\\\ \\end{matrix}\\right] \\end{aligned}</div><p><strong>properties</strong>:</p><ul><li><p>solution is always a pair</p></li><li><p>singularity situation :</p><p>​\texample : <span class=\"math math-inline\">[\\gamma_1,\\beta_1,\\gamma_2]</span> <span class=\"math math-inline\">\\beta_1=\\{0,\\pm\\pi\\}</span> <span class=\"math math-inline\">\\rightarrow</span> <strong>gimble lock</strong></p></li></ul><h3>Axis&#x26;Angle</h3><p>rotate by vector <span class=\"math math-inline\">\\left[\\begin{matrix}r_x\\\\r_y\\\\r_z\\end{matrix}\\right]</span> by <span class=\"math math-inline\">\\theta</span></p><p>with constraint : <span class=\"math math-inline\">r_x^2+r_y^2+r_z^2=1</span></p><div class=\"math math-display\">R(\\theta,r)=\\left[\\begin{matrix} r_x^2(1-cos\\theta)+cos\\theta&#x26; r_xr_y(1-cos\\theta)-r_zsin\\theta&#x26; r_xr_z(1-cos\\theta)+r_ysin\\theta \\\\ r_xr_y(1-cos\\theta)+r_zsin\\theta&#x26; r_y^2(1-cos\\theta)+cos\\theta&#x26; r_yr_z(1-cos\\theta)-r_xsin\\theta \\\\ r_xr_z(1-cos\\theta)-r_ysin\\theta&#x26; r_yr_z(1-cos\\theta)+r_xsin\\theta&#x26; r_z^2(1-cos\\theta)+cos\\theta \\end{matrix}\\right]</div><div class=\"math math-display\">\\begin{aligned} cos\\theta &#x26;= \\frac{r_{11}+r_{22}+r_{33}-1}{2}\\\\ sin\\theta &#x26;= \\frac{r_{32}-r_{23}}{2r_x}\\\\ &#x26;=\\frac{r_{13}-r_{31}}{2r_y}\\\\ &#x26;=\\frac{r_{21}-r_{12}}{2r_x}\\\\ r &#x26;= \\left[\\begin{matrix} \\pm\\sqrt{\\frac{r_{11}-cos\\theta}{1-cos\\theta}}\\\\ \\pm\\sqrt{\\frac{r_{22}-cos\\theta}{1-cos\\theta}}\\\\ \\pm\\sqrt{\\frac{r_{33}-cos\\theta}{1-cos\\theta}} \\end{matrix}\\right] \\end{aligned}</div><h3>Unit Quaternion</h3><p><strong>compared to Euler Angle</strong></p><ul><li>better computational performance</li><li>yeilds less ambiguous solutions</li></ul><p>rotate by vector <span class=\"math math-inline\">\\epsilon</span> by <span class=\"math math-inline\">\\theta</span></p><p>with constraint : <span class=\"math math-inline\">\\eta^2+\\epsilon_x^2+\\epsilon_y^2+\\epsilon_z^2=1</span></p><div class=\"math math-display\">\\mathcal Q(\\theta,r)=\\{\\eta,\\epsilon\\}=\\{\\frac{cos\\theta}{2},r\\cdot sin\\frac{\\theta}{2}\\}</div><div class=\"math math-display\">\\begin{aligned} R(\\eta,\\epsilon)&#x26;=\\left\\{\\begin{matrix}2(\\eta^2+\\epsilon_x^2)-1&#x26;2(\\epsilon_x\\epsilon_y-\\eta\\epsilon_z)&#x26;2(\\epsilon_x\\epsilon_z+\\eta\\epsilon_y)\\\\2(\\epsilon_x\\epsilon_y+\\eta\\epsilon_z)&#x26;2(\\eta^2+\\epsilon_y^2)-1&#x26;2(\\epsilon_y\\epsilon_z-\\eta\\epsilon_x)\\\\2(\\epsilon_x\\epsilon_z-\\eta\\epsilon_y)&#x26;2(\\epsilon_y\\epsilon_z+\\eta\\epsilon_x)&#x26;2(\\eta^2+\\epsilon_z^2)-1\\end{matrix}\\right\\} \\end{aligned}</div><div class=\"math math-display\">\\begin{aligned} \\eta &#x26;= \\frac{1}{2}\\sqrt{r_{11}+r_{22}+r_{33}+1} \\\\ \\epsilon&#x26;=\\frac{1}{2}\\left[\\begin{matrix} sgn(r_{32}-r_{23})\\sqrt{r_{11}-r_{22}-r_{33}+1}\\\\ sgn(r_{13}-r_{31})\\sqrt{r_{22}-r_{33}-r_{11}+1}\\\\ sgn(r_{21}-r_{12})\\sqrt{r_{33}-r_{11}-r_{22}+1} \\end{matrix}\\right] \\end{aligned}</div><h2>Transform</h2><div class=\"math math-display\">\\begin{aligned} ^iT_j &#x26;= \\left\\{\\begin{matrix}^iR_j&#x26;^ir_{j_o,i_o}\\\\0^T&#x26;1\\end{matrix}\\right\\} \\\\ ^jT_i &#x26;= \\left\\{\\begin{matrix}^iR_j^T&#x26;-^iR_j^T~^ir_{j_o,i_o}\\\\0^T&#x26;1\\end{matrix}\\right\\} \\end{aligned}</div><p><span class=\"math math-inline\">R</span> : rotation matrix</p><p><span class=\"math math-inline\">r</span> : translation vector</p><p><span class=\"math math-inline\">T</span> : transform matrix</p><h1>Direct Kinematics</h1><div class=\"math math-display\">q\\rightarrow x_E</div><p><span class=\"math math-inline\">q</span> : vector of parameter of each joint</p><p><span class=\"math math-inline\">x_E</span> : vector of end state in task space,</p><p>​ PRY-Representation : <span class=\"math math-inline\">x_E=[p_x \\quad p_y \\quad p_z \\quad \\varphi \\quad \\theta \\quad \\psi]^T</span></p><p>​ Axis&#x26;Angle Representation : <span class=\"math math-inline\">x_E=[p_x \\quad p_y \\quad p_z \\quad r_x \\quad r_y \\quad \\theta]^T</span></p><p>​ Unit Quaternion Representation : <span class=\"math math-inline\">x_E=[p_x\\quad p_y\\quad p_z\\quad \\epsilon_x\\quad \\epsilon_y\\quad \\epsilon_z]^T</span></p><h2>Joint</h2><p><strong>Prismatic Joint</strong></p><img src=\"https://s2.loli.net/2022/02/18/yfrbHilsa2CXuZq.png\" style=\"zoom:20%;\" width=\"630\" height=\"557\" type=\"png\" blurdataurl=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAIAAAA7ljmRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAMklEQVQImQEnANj/ADM4jQAAHSUpW0NOrQB5ne9sicU9MBB4eIUAwPX/wP//293j3eP3FkETcncJXL8AAAAASUVORK5CYII=\"><p><strong>revolute joint</strong></p><img src=\"https://s2.loli.net/2022/02/18/hApHum1bXzG2tIO.png\" style=\"zoom:20%;\" width=\"2560\" height=\"1920\" type=\"png\" blurdataurl=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAIAAAA7ljmRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAALklEQVQImWNgYGD4n2QRv0xOPI+Poe+/e/hxNd2NCgwMDAxB/51cnur+txIHcgDnUAuf0nTVvAAAAABJRU5ErkJggg==\"><h2>DH Convention</h2><p><strong>Denavit-Hartenberg(DH) Convention</strong></p><p>joint transformation can be represented as :</p><div class=\"math math-display\">\\begin{aligned} ^iT_j &#x26;=\\left\\{\\begin{matrix} cos\\delta&#x26;-sin\\delta&#x26;0&#x26;0\\\\ sin\\delta&#x26;cos\\delta&#x26;0&#x26;0\\\\ 0&#x26;0&#x26;1&#x26;d\\\\ 0&#x26;0&#x26;0&#x26;1 \\end{matrix}\\right\\} \\cdot \\left\\{\\begin{matrix} 1&#x26;0&#x26;0&#x26;l\\\\ 0&#x26;cos\\lambda&#x26;-sin\\lambda&#x26;0\\\\ 0&#x26;sin\\lambda&#x26;cos\\lambda&#x26;0\\\\ 0&#x26;0&#x26;0&#x26;1 \\end{matrix}\\right\\} \\\\ &#x26;=\\left\\{\\begin{matrix} cos\\delta&#x26;-sin\\delta cos\\lambda&#x26;sin\\delta sin\\lambda &#x26;lcos\\delta\\\\ sin\\delta&#x26;cos\\delta cos\\lambda&#x26;-cos\\delta sin\\lambda&#x26;lsin\\delta\\\\ 0&#x26;sin\\lambda&#x26;cos\\lambda&#x26;d\\\\ 0&#x26;0&#x26;0&#x26;1 \\end{matrix}\\right\\} \\\\ p_E &#x26;= {^E}r_0 \\\\ e_{z,E}&#x26;={^E}R_0 \\left[\\begin{matrix} 0\\\\0\\\\1 \\end{matrix}\\right] \\end{aligned}</div><h1>Inverse Kinematics</h1><div class=\"math math-display\">x_E\\rightarrow p</div><h2>Analytical</h2><h3>Position</h3><p>solve vector <span class=\"math math-inline\">q</span> through</p><div class=\"math math-display\">p_E= {^e}r_0(q)</div><h3>Orientation</h3><p>solve the vector <span class=\"math math-inline\">q</span> through</p><div class=\"math math-display\">{^E}R_0</div><h2>Numerical</h2><p><strong>Gradient Descend</strong></p><div class=\"math math-display\">q_{k+1}=q_k+\\alpha\\cdot J_{AP}^T(q_k)(p_d-p_e)</div><p><span class=\"math math-inline\">p_e</span> : actual end position</p><p><span class=\"math math-inline\">p_d</span> : desired end position</p><p><span class=\"math math-inline\">J_A</span> : Jacobian matrix defined by <span class=\"math math-inline\">\\frac{\\partial p_e}{\\partial q}</span></p><p><span class=\"math math-inline\">\\alpha</span> : learning rate</p><h1>Differential Kinematics</h1><div class=\"math math-display\">\\dot q \\rightarrow v_E/\\dot x_E</div><p><span class=\"math math-inline\">v_E</span> : end velocity of shape <span class=\"math math-inline\">v_E\\in\\mathbb R^6</span></p><p><span class=\"math math-inline\">\\dot x_E</span> : differential of end state <span class=\"math math-inline\">\\dot x_E\\in\\mathbb R^6</span></p><p><span class=\"math math-inline\">\\dot q</span> : differential of joint parameter</p><p><span class=\"math math-inline\">\\sigma_i</span> : whether joint <span class=\"math math-inline\">i</span> is prismatic joint</p><h2>Geometric Jacobian</h2><div class=\"math math-display\">\\begin{aligned} v_E&#x26;= \\left[\\begin{matrix} \\dot{p_E}\\\\ \\omega_E \\end{matrix}\\right]\\\\ &#x26;= \\left[\\begin{matrix} \\dot{J}_{GP_1}&#x26;\\cdots&#x26;\\dot{J}_{GP_n}\\\\ \\dot{J}_{GO_1}&#x26;\\cdots&#x26;\\dot{J}_{GO_n} \\end{matrix}\\right] \\dot q\\\\ &#x26;= J_G\\dot{q} \\end{aligned}</div><p><span class=\"math math-inline\">J_G</span> : geometric jacobian of shape <span class=\"math math-inline\">J_G\\in \\mathbb R^{6\\times|q|}</span></p><p><span class=\"math math-inline\">J_{GP_i}</span> : geometric position jacobian matrix at joint <span class=\"math math-inline\">i</span></p><p><span class=\"math math-inline\">J_{GO_i}</span> : geometric orientation jacobian matrix at joint <span class=\"math math-inline\">i</span></p><p><span class=\"math math-inline\">\\omega</span> : vector of angular velocity of shape <span class=\"math math-inline\">\\omega\\in \\mathbb R^3</span></p><p><span class=\"math math-inline\">\\dot p_E</span> : differential of end position of shape <span class=\"math math-inline\">p_E\\in \\mathbb R^3</span></p><ul><li><p>prismatic joint</p><div class=\"math math-display\">\\begin{aligned} {^0}\\omega_i &#x26;= {^0}\\omega_{i-1} \\\\ {^0}\\dot r_{i,^0O}&#x26;={^0}\\dot r_{i-1,^0O} +{^0}\\omega_{i-1}\\times{^0}r_{{^i}O,{^{i-1}}O} +\\left[\\begin{matrix} 0\\\\0\\\\\\dot q_i \\end{matrix}\\right] \\end{aligned}</div><div class=\"math math-display\">\\left[\\begin{matrix} \\dot J_{GP_i}\\\\ \\dot J_{GO_i} \\end{matrix}\\right] = \\left[\\begin{matrix} {^0}e_{z,^{i-1}O}\\\\ 0 \\end{matrix}\\right]</div><p>​\t<span class=\"math math-inline\">{^0}e_{z,{^{i-1}}O}</span> : <span class=\"math math-inline\">z</span> axis unit vector of coordinate <span class=\"math math-inline\">{^{i-1}}O</span> in coordinate <span class=\"math math-inline\">{^0}O</span></p></li><li><p>revolute joint</p><div class=\"math math-display\">\\begin{aligned} {^0}\\omega_i &#x26;= {^0}\\omega_{i-1} +\\left[\\begin{matrix} 0\\\\0\\\\\\dot q_i \\end{matrix}\\right] \\\\ {^0}\\dot r_{{^i}O,{^0}O} &#x26;= {^0}\\dot r_{{^{i-1}}O,{^0}O}+ {^0}\\omega_i\\times{^0}r_{{^i}O,{^{i-1}}O} \\end{aligned}</div><div class=\"math math-display\">\\left[\\begin{matrix} \\dot J_{GP_i}\\\\ \\dot J_{GO_i} \\end{matrix}\\right]= \\left[\\begin{matrix} {^0}e_{z,{^{i-1}}O}\\times({^0}r_{E,{^0}O}-{^0}r_{{^{i-1}}O,{^0}O})\\\\ {^0}e_{z,{^{i-1}}O} \\end{matrix}\\right]</div></li></ul><h2>Analytical Jacobian</h2><p>refers to differential quantities of variables in the operational space</p><div class=\"math math-display\">\\begin{aligned} \\dot x_E &#x26;= \\left[\\begin{matrix} \\dot p_E\\\\ \\dot \\Phi_E \\end{matrix}\\right]\\\\ &#x26;= \\left[\\begin{matrix}\\dot J_{AP1}&#x26;\\cdots&#x26;\\dot J_{AP_n}\\\\\\dot J_{AO1}&#x26;\\cdots&#x26;\\dot J_{AOn}\\end{matrix}\\right]\\\\ &#x26;= J_A\\dot q \\end{aligned}</div><p><span class=\"math math-inline\">J_{AP_i}</span> : analytical position jacobian at joint <span class=\"math math-inline\">i</span></p><p><span class=\"math math-inline\">J_{AO_i}</span> : analytical orientation jacobian at joint <span class=\"math math-inline\">i</span></p><p><span class=\"math math-inline\">\\dot \\Phi_E</span> : differential of end orientation</p><div class=\"math math-display\">\\begin{aligned} \\omega_E &#x26;= J_R(\\Phi_E)\\dot \\Phi_E\\\\ J_R&#x26;=\\left[\\begin{matrix} \\frac{\\partial r_{E,x}}{\\partial \\phi}&#x26; \\frac{\\partial r_{E,x}}{\\partial \\theta}&#x26; \\frac{\\partial r_{E,x}}{\\partial \\psi}\\\\ \\frac{\\partial r_{E,y}}{\\partial \\phi}&#x26; \\frac{\\partial r_{E,y}}{\\partial \\theta}&#x26; \\frac{\\partial r_{E,y}}{\\partial \\psi}\\\\ \\frac{\\partial r_{E,z}}{\\partial \\phi}&#x26; \\frac{\\partial r_{E,z}}{\\partial \\theta}&#x26; \\frac{\\partial r_{E,z}}{\\partial \\psi} \\end{matrix}\\right] \\\\ \\end{aligned}</div><div class=\"math math-display\">\\begin{aligned} \\frac{\\partial R_E(\\Phi_E)}{\\partial \\varphi/\\theta/\\psi}R_E(\\Phi_E)^T&#x26;=\\left[\\begin{matrix} 0&#x26; -\\frac{\\partial r_{E,z}}{\\partial \\varphi/\\theta/\\psi}&#x26; \\frac{\\partial r_{E,y}}{\\partial \\varphi/\\theta/\\psi}\\\\ \\frac{\\partial r_{E,z}}{\\partial \\varphi/\\theta/\\psi}&#x26; 0&#x26; -\\frac{\\partial r_{E,x}}{\\partial \\varphi/\\theta/\\psi}\\\\ -\\frac{\\partial r_{E,y}}{\\partial \\varphi/\\theta/\\psi}&#x26; \\frac{\\partial r_{E,x}}{\\partial \\varphi/\\theta/\\psi}&#x26; 0 \\end{matrix}\\right] \\\\ R_E(\\Phi_E)&#x26;=R_{z,\\varphi}R_{y,\\theta}R_{z,\\psi}\\\\ &#x26;=\\left[\\begin{matrix} cos\\varphi&#x26;-sin\\varphi&#x26;0\\\\ sin\\varphi&#x26;cos\\varphi&#x26;0\\\\ 0&#x26;0&#x26;1 \\end{matrix}\\right] \\left[\\begin{matrix} cos\\theta&#x26;0&#x26;sin\\theta\\\\ 0&#x26;1&#x26;0\\\\ -sin\\theta&#x26;0&#x26;cos\\theta \\end{matrix}\\right] \\left[\\begin{matrix} cos\\phi&#x26;-sin\\phi&#x26;0\\\\ sin\\phi&#x26;cos\\phi&#x26;0\\\\ 0&#x26;0&#x26;1 \\end{matrix}\\right] \\end{aligned}</div><h2>Singularity</h2><div class=\"math math-display\">|J_{G}|=0</div><ul><li><p>boundary singularity</p><ul><li><p>elbow singularity</p><p><img src=\"https://s2.loli.net/2022/02/12/lKyvj7ebd2QgIiZ.png\" alt=\"\" width=\"456\" height=\"354\" type=\"png\" blurdataurl=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAIAAAA7ljmRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAMklEQVQImQEnANj/ANXV1EBBQTAwMHh4eACKioolJSWvr6/X19cAJSUlAAAAnZ2d////PZIRGxfkrkQAAAAASUVORK5CYII=\"></p></li></ul></li><li><p>internal singularity</p><ul><li><p>wrist singularity <img src=\"https://s2.loli.net/2022/02/12/RDH2gK7z6oQ3hYF.png\" alt=\"\" width=\"418\" height=\"207\" type=\"png\" blurdataurl=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAACCAIAAADwyuo0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIklEQVQImWP4+vWrialpfkH+v///GLq6+xgY2TS19Rpb2gGt7gt/FPEpEAAAAABJRU5ErkJggg==\"></p></li><li><p>shoulder singularity</p><p><img src=\"https://s2.loli.net/2022/02/12/drESAtY19WFgOjZ.png\" alt=\"\" width=\"293\" height=\"373\" type=\"png\" blurdataurl=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAECAIAAADETxJQAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAL0lEQVQImWPo7e29fPny////GYqLirZt2wJibdu2zdHR8cOHDwypqSkMDAzlZeUA8VsV2VY1Q90AAAAASUVORK5CYII=\"></p></li></ul></li></ul><p>​</p><h1>Inverse Differential Kinematics</h1><div class=\"math math-display\">v_E / \\dot x_E \\rightarrow \\dot q</div><h2>Analytical</h2><div class=\"math math-display\">\\dot q = J_A^{-1}\\dot x_E \\\\ \\dot q = J_G^{-1}\\dot v_E</div><h2>Inverse Kinematics Algorithm</h2><p><strong>Newton Method</strong></p><ol><li><span class=\"math math-inline\">\\dot q = J_A^{\\textdagger}(\\dot x_d+K(\\dot x_d- J_A(q)\\dot q))</span></li><li><span class=\"math math-inline\">q\\leftarrow q+\\dot q \\Delta t</span></li><li>goto 1</li></ol><p><span class=\"math math-inline\">K</span> : diagonal weight matrix , usually <span class=\"math math-inline\">I</span></p><p><span class=\"math math-inline\">J_A^\\textdagger</span> : pseudo inverse of <span class=\"math math-inline\">J_A</span></p><div class=\"math math-display\">J_{A}^{\\textdagger}=J_{A}^T(J_{A}J_{A}^T)^{-1}\\\\</div><h2>Static Equilibrium</h2><div class=\"math math-display\">\\tau = J_G^T\\gamma_E</div><p><span class=\"math math-inline\">\\tau</span> : torque of each joint of shape <span class=\"math math-inline\">\\tau\\in \\mathbb R^{|q|}</span></p><p><span class=\"math math-inline\">\\gamma_E</span> : general force of the end, <span class=\"math math-inline\">\\gamma_E=\\left[\\begin{matrix}f_E\\\\\\mu_E\\end{matrix}\\right]</span></p><p><span class=\"math math-inline\">f_E</span> : force of the end of shape <span class=\"math math-inline\">f_E\\in \\mathbb R^3</span></p><p><span class=\"math math-inline\">\\mu_E</span> : torque of the end of shape <span class=\"math math-inline\">\\mu_E \\in \\mathbb R^3</span></p><h2>Manipulability Ellipsoid</h2><p>purpose:</p><ul><li><p>find the most suitable joint configurations for a given task</p></li><li><p>velocity manipulability</p><div class=\"math math-display\">v_E^T(J_GJ_G^T)^{-1}v_E=1</div><img src=\"https://s2.loli.net/2022/02/12/GBT2yrX4OfMUPqp.png\" style=\"zoom:50%;\" width=\"512\" height=\"490\" type=\"png\" blurdataurl=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAP0lEQVQImQE0AMv/AK2trSkpKb6+vs7OzgCCgYEBAABqa2re3t0A39/furu7mpuby8zNAP7//0FGSgoRFsjKzMbgG+EGz7BnAAAAAElFTkSuQmCC\"></li><li><p>force manipulability</p><div class=\"math math-display\">\\gamma_E^T(J_GJ_G^T)\\gamma_E=1</div><img src=\"https://s2.loli.net/2022/02/12/elfxciYwQKkhW2u.png\" style=\"zoom:50%;\" width=\"486\" height=\"487\" type=\"png\" blurdataurl=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAP0lEQVQImQE0AMv/ALy8vEVFRePj4/Dw8ACWlpYlJSWvr6/j4+MAycnJ2tjY///98PDwAPf5+Ts/QwABC6irr06AH8i2JYOmAAAAAElFTkSuQmCC\"></li></ul><h1>Lagrange</h1><h2>Lagrange Equation</h2><div class=\"math math-display\">\\begin{aligned} \\mathcal L(q,\\dot q) &#x26;= E_{kin}(q,\\dot q)-E_{pot}(q) \\\\ \\xi &#x26;= \\frac{\\partial}{\\partial t}(\\frac{\\partial \\mathcal L}{\\partial \\dot q})-(\\frac{\\partial L}{\\partial q}) \\end{aligned}</div><p><span class=\"math math-inline\">E_{kin}</span> : kinetic energy</p><p><span class=\"math math-inline\">E_{pot}</span> : potential energy</p><p><span class=\"math math-inline\">\\xi</span> : non-conservatives generalized forces acting on the system</p><h2>Equation of Motion</h2><div class=\"math math-display\">\\mathcal L=\\frac{1}{2}\\dot q^TM\\dot q + \\sum_{i=1}^{|q|}m_{link_i}{^0}g_0^T{^0}r_{CG_{link_i},{^0}O}</div><div class=\"math math-display\">\\begin{aligned} E_{kin,link_i}&#x26;=\\frac{1}{2}m_{link_i} {^0}\\dot r_{CG_{link_i},{^0}O}^T {^0}\\dot r_{CG_{link_i},{^0}O}+ \\frac{1}{2} {^0}\\omega_i^T {^0}R_i {^i}I_{link_i} {^0}R_i^T {^0}\\omega_i \\\\ &#x26;=\\frac{1}{2}m_{link_i} \\dot q^T J_{GP_{link_i}}^T J_{GP_{link_i}} \\dot q +\\frac{1}{2} \\dot q^T J_{GO_{link_i}}^T {^0}R_i {^i}I_{link_i} {^0}R_i^T J_{GO_{link_i}} \\dot q \\\\ E_{kin,mot_i}&#x26;=\\frac{1}{2}m_{mot_i} {^0}\\dot r_{CG_{mot_i},{^0}O}^T {^0}\\dot r_{CG_{mot_i},{^0}O}+ \\frac{1}{2} {^0}\\omega_{mot_i}^T {^0}I_{mot_i} {^0}\\omega_{mot_i} \\\\ &#x26;=\\frac{1}{2}m_{mot_i} \\dot q^T J_{GP_{mot_i}}^T J_{GP_{mot_i}} \\dot q+ \\frac{1}{2} \\dot q^T J_{GO_{mot_i}}^T {^0}R_{mot_i} {^{mot_i}}I_{mot_i} {^0}R_{mot_i}^T J_{GO_{mot_i}} \\dot q \\\\ E_{kin} &#x26;= \\sum_{i=1}^{|q|} (E_{kin,link_i}+E_{kin,mot_i}) \\end{aligned}</div><p>no friction and no external forces</p><div class=\"math math-display\">M(q)\\ddot q+G(q,\\dot q)\\dot q+g(q) = \\tau</div><p><span class=\"math math-inline\">\\tau</span> : torque applied on each joint , <span class=\"math math-inline\">\\tau \\in \\mathbb R^{|q|}</span></p><p><span class=\"math math-inline\">M</span> : inertia matrix , <span class=\"math math-inline\">M\\in \\mathbb R^{|q|\\times |q|}</span></p><div class=\"math math-display\">M(q)=\\sum_{i=1}^n(m_{link_i}J_{GP_{link_i}}^TJ_{GP_{link_i}}+ J_{GO_{link_i}}^T{^0}R_i{^i}I_{link_i}{^0}R_i^TJ_{GO_{link_i}})</div><p><span class=\"math math-inline\">m_{link_i}</span> : mass of link <span class=\"math math-inline\">i</span> , <span class=\"math math-inline\">m_{link_i}\\in \\mathbb R_+</span></p><p><span class=\"math math-inline\">I_{link_i}</span> : inertia of link <span class=\"math math-inline\">i</span> , <span class=\"math math-inline\">I_{link_i}\\in \\mathbb R^3</span>, usually represent as a diagonal matrix of <span class=\"math math-inline\">\\mathbb R^{3\\times 3}</span></p><p><span class=\"math math-inline\">J_{GP_{link_i}}</span> : position jacobian matrix of link <span class=\"math math-inline\">i</span> , <span class=\"math math-inline\">J_{GP_{link_i}}\\in \\mathbb R^{3\\times|q|}</span></p><div class=\"math math-display\">J_{GP_{link_i}} = [\\dot J_{GP1_{link_i}}\\cdots\\dot J_{GPi_{link_i}} 0\\cdots 0]</div><p><span class=\"math math-inline\">\\dot J_{GPj_{link_i}}</span> : position jacobian component of joint <span class=\"math math-inline\">j</span> toward link <span class=\"math math-inline\">i</span></p><div class=\"math math-display\">\\dot J_{GPj_{link_i}} = \\begin{cases} \\begin{aligned} prismatic:&#x26; {^0}e_{z,{^{j-1}}O} \\\\ revolute:&#x26; {^0}e_{z,{^{j-1}}O}\\times({^0}r_{CG_{link_i,{^0}O}}-{^0}r_{{^{j-1}}O,{^0}O}) \\end{aligned} \\end{cases}</div><p><span class=\"math math-inline\">{^0}r_{CG_{link_i,{^0}O}}</span> : vector from origin of coordinate <span class=\"math math-inline\">0</span> to center gravity point of link <span class=\"math math-inline\">i</span> presented in coordinate <span class=\"math math-inline\">0</span></p><p><span class=\"math math-inline\">J_{GO_{link_i}}</span> : orientation jacobian matrix of link <span class=\"math math-inline\">i</span> , <span class=\"math math-inline\">J_{GO_{link_i}}\\in \\mathbb R^{3\\times|q|}</span></p><div class=\"math math-display\">J_{GO_{link_i}} = [\\dot J_{GO1_{link_i}}\\cdots\\dot J_{GOi_{link_i}} 0\\cdots 0]</div><p><span class=\"math math-inline\">\\dot J_{GOj_{link_i}}</span> : orientation jacobian component of joint <span class=\"math math-inline\">j</span> toward link <span class=\"math math-inline\">i</span></p><div class=\"math math-display\">\\dot J_{GOj_{link_i}} = \\begin{cases} \\begin{aligned} prisimatic :&#x26; 0 \\\\ revolute : &#x26;{^0}e_{z,{^{j-1}}O} \\end{aligned} \\end{cases}</div><p><span class=\"math math-inline\">G</span> : gyroskopic forces matrix , <span class=\"math math-inline\">G\\in\\mathbb R^{|q|\\times|q|}</span>, <span class=\"math math-inline\">G=\\dot M\\dot q-\\frac{1}{2}(\\frac{\\partial (\\dot q^TM\\dot q)}{\\partial q})^T</span></p><div class=\"math math-display\">g_{ij}=\\sum_{k=1}^{|q|}\\frac{1}{2}( \\frac{\\partial m_{ij}}{\\partial q_k}+ \\frac{\\partial m_{ik}}{\\partial q_j}- \\frac{\\partial m_{jk}}{\\partial q_i} )\\dot q_k</div><p><span class=\"math math-inline\">g_{ij}</span> : item in <span class=\"math math-inline\">G</span> of row <span class=\"math math-inline\">i</span> column <span class=\"math math-inline\">j</span></p><p><span class=\"math math-inline\">m_{ij}</span> : item in <span class=\"math math-inline\">M</span> of row <span class=\"math math-inline\">i</span> column <span class=\"math math-inline\">j</span></p><p><span class=\"math math-inline\">g</span> : gravity matrix , <span class=\"math math-inline\">g\\in \\mathbb R^{|q|}</span></p><div class=\"math math-display\">g_i = -\\sum_{j=1}^{|n|}( m_{link_j} {^0}g_0^T \\frac{\\partial {^0}r_{CG_{link_j},{^0}O}}{\\partial q_i} )</div><p><span class=\"math math-inline\">g_i</span> : <span class=\"math math-inline\">i</span> th item of vector <span class=\"math math-inline\">g</span></p><p><span class=\"math math-inline\">{^0}g_{0}</span> : gravitational forces vector, <span class=\"math math-inline\">{^0}g_0\\in\\mathbb R^3</span>, usually <span class=\"math math-inline\">{^0}g_0=-\\left[\\begin{matrix}0\\\\0\\\\-9.81\\end{matrix}\\right]</span></p><h1>Newton-Euler</h1><div class=\"math math-display\">q,\\dot q,\\ddot q,h_E\\rightarrow f,\\mu</div><p><span class=\"math math-inline\">h_E</span> : generalized forces from the end-effector</p><p><span class=\"math math-inline\">f</span> : force exterted</p><p><span class=\"math math-inline\">\\mu</span> : torque extered</p><p><img src=\"https://s2.loli.net/2022/02/13/H2x9Tsa4q5SLbI8.png\" alt=\"\" width=\"1365\" height=\"608\" type=\"png\" blurdataurl=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAACCAIAAADwyuo0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAI0lEQVQImWPIyMqZPmO6hbVFakYGAwMju4y84p///w8ePgoAd9sKjPeiPa0AAAAASUVORK5CYII=\"></p><h2>Kinematics Forward</h2><div class=\"math math-display\">\\begin{aligned} {^i}\\omega_i &#x26;= \\begin{cases}\\begin{aligned} prismatic:&#x26; {^{i-1}}R_i^T {^{i-1}}\\omega_{i-1} \\\\ revolute:&#x26; {^{i-1}}R_i^T({^{i-1}}\\omega_{i-1}+\\left[\\begin{matrix}0\\\\0\\\\\\dot q_i\\end{matrix}\\right]) \\end{aligned}\\end{cases} \\\\ {^i}\\dot \\omega_i &#x26;= \\begin{cases}\\begin{aligned} prismatic:&#x26;{^{i-1}}R_i^T {^{i-1}}\\dot \\omega_{i-1} \\\\ revolute:&#x26; {^{i-1}}R_i^T( {^{i-1}}\\dot \\omega_{i-1}+ \\left[\\begin{matrix} 0\\\\0\\\\\\ddot q_i \\end{matrix}\\right]+ {^{i-1}}\\omega_{i-1}\\times \\left[\\begin{matrix} 0\\\\0\\\\\\dot q_i \\end{matrix}\\right] ) \\end{aligned}\\end{cases} \\\\ {^i}\\ddot r_{{^i}O,{^0}O}&#x26;= \\begin{cases}\\begin{aligned} prismatic:&#x26; {^{i-1}}R_i^T( {^{i-1}}\\ddot r_{{^{i-1}}O,{^0}O} \\left[\\begin{matrix} 0\\\\0\\\\\\ddot q_i \\end{matrix}\\right])+ 2\\dot q_i{^i}\\omega_i\\times( {^{i-1}}R_i^T {^{i-1}}e_{z,{^{i-1}}O})+ {^i}\\dot \\omega_i\\times {^i}r_{{^i}O,{^{i-1}}O}+ {^i}\\omega_i\\times( {^i}\\omega_i\\times {^i}r_{{^i}O,{^{i-1}}O} ) \\\\ revolute:&#x26; {^{i-1}}R_i^T {^{i-1}}\\ddot r_{{^{i-1}}O,{^0}O}+ {^i}\\dot \\omega_i\\times {^i}r_{{^i}O,{^{i-1}}O}+ {^i}\\omega_i\\times( {^i}\\omega_i\\times {^i}r_{{^i}O,{^{i-1}}O} ) \\end{aligned}\\end{cases} \\\\ {^i}\\ddot r_{CG_{link_i},{^0}O}&#x26;= {^i}\\ddot r_{{^i}O,{^0}O}+ {^i}\\dot \\omega_i\\times {^i}r_{CG_{link_i},{^i}O}+ {^i}\\omega_i\\times( {^i}\\omega_i\\times {^i}r_{CG_{link_i},{^i}O} ) \\end{aligned}</div><h2>Dynamics Backward</h2><div class=\"math math-display\">\\begin{aligned} {^i}f_{i,i-1} &#x26;= {^i}R_{i+1} {^{i+1}}f_{i+1,i}+ m_i {^i}\\ddot r_{CG_i,{^0}O}+ c_{vi}\\dot d_i^{i-1} e_{z,mot_i}+ F_{di} sgn(\\dot d_i) {^{i-1}}e_{z,mot_i} \\\\ {^i}\\mu_{i,i-1} &#x26;= - {^i}f_{i,i-1}\\times( {^i}r_{{^i}O,{^{i-1}}O}+ {^i}r_{CG_i,{^i}O})+ {^i}R_{i+1} {^{i+1}}\\mu_{i+1,i}+( {^i}R_{i+1} {^{i+1}}f_{i+1,i})\\times {^i}r_{CG_i,{^i}O}+ {^i}I_i {^i}\\dot \\omega_i+ {^i}\\omega_i \\times( {^i}I_i {^i}\\omega_i) \\\\ &#x26;+i_{mot_{i_1}} \\ddot q_{i+1} I_{mot_{i+1}} {^0}e_{z,mot_{i+1}}+ i_{mot_{i+1}} \\dot q_{i+1} I_{mot_{i+1}} {^0}\\omega_i\\times {^0}e_{z,mot_{i+1}}+ c_{vi}\\dot \\delta_i^{i-1} e_{z,mot_i}+ F_{di} sgn(\\dot \\delta_i) {^{i-1}}e_{z,mot_i} \\\\ \\tau_i &#x26;= \\begin{cases}\\begin{aligned} prismatic:&#x26; ({^{i-1}}R_{i+1})^T {^{i+1}}f_{i+1,i} {^{i-1}}e_{z,{^{i-1}}O}+ i_{mot_i}I_{mot_i} {^{i-1}}e_{z,mot_i}+ c_{vi}\\dot d_i+ F_{di}sgn(\\dot d_i) \\\\ revolute:&#x26; ({^{i-1}}R_{i+1})^T {^{i+1}}\\mu_{i+1,i} {^{i-1}}e_{z,{^{i-1}}O}+ i_{mot_i}I_{mot_i} {^{i-1}}e_{z,mot_i}+ c_{vi}\\dot d_i+ F_{di}sgn(\\dot d_i) \\end{aligned}\\end{cases} \\end{aligned}</div><h2>Parameter Identification</h2><div class=\"math math-display\">q,\\dot q,\\ddot q\\rightarrow m,I,c,f</div><p><span class=\"math math-inline\">m</span> : mass of each link</p><p><span class=\"math math-inline\">I</span> : inertia of each link and motor</p><p><span class=\"math math-inline\">c,f</span> : viscous/dry friction parameter</p><ul><li><p>CAD modeling</p><p>simple but inaccurate</p></li><li><p>Heuristic Approach</p><p>cumbersome</p></li><li><p>Linear Approach</p><p>accurate</p><div class=\"math math-display\">\\begin{aligned} \\tau &#x26;= \\xi+C_v\\dot q+F_dsgn(\\dot q) \\\\&#x26;= Y(q,\\dot q,\\ddot q)\\pi \\end{aligned}</div><p><span class=\"math math-inline\">\\tau_i</span> : torque at joint <span class=\"math math-inline\">i</span></p><div class=\"math math-display\">\\tau_i= \\begin{cases}\\begin{aligned} prismatic:&#x26; {^i}f_{i,i-1}^T {^{i-1}}R_i^T {^{i-1}}e_{z,{^{i-1}}O}+ i_{mot_i} I_{mot_i} {^{i-1}}\\dot \\omega_{mot_i}^T {^{i-1}}e_{z,mot_i}+ c_{ii} \\dot q_i+ f_{ii} sgn(\\dot q_i) \\\\ revolute:&#x26; {^i}\\mu_{i,i-1}^T {^{i-1}}R_i^T {^{i-1}}e_{z,{^{i-1}}O}+ i_{mot_i} I_{mot_i} {^{i-1}}\\dot \\omega_{mot_i}^T {^{i-1}}e_{z,mot_i}+ c_{ii} \\dot q_i+ f_{ii} sgn(\\dot q_i) \\end{aligned}\\end{cases}</div><p><span class=\"math math-inline\">Y(q(t_i),\\dot q(t_i),\\ddot q(t_i))</span> : regressor matrix measured at <span class=\"math math-inline\">i</span> th times,</p><p><span class=\"math math-inline\">\\pi_i</span> : <span class=\"math math-inline\">i</span>th element of <span class=\"math math-inline\">\\pi</span></p><div class=\"math math-display\">\\pi_i = \\left[\\begin{matrix} m_i&#x26; m_i{^i}r_{x;CG_i,{^i}O}&#x26; m_i{^i}r_{y;CG_i,{^i}O}&#x26; m_i{^i}r_{z;CG_i,{^i}O}&#x26; {^i}I_{xx;i}&#x26; {^i}I_{xy;i}&#x26; {^i}I_{xz;i}&#x26; {^i}I_{yy;i}&#x26; {^i}I_{yz;i}&#x26; {^i}I_{zz;i}&#x26; I_{mot_i}&#x26; c_{ii}&#x26; f_{ii} \\end{matrix}\\right]^T</div><p><span class=\"math math-inline\">m_i</span> : mass of link <span class=\"math math-inline\">i</span></p><p><span class=\"math math-inline\">^ir_{CG_i,{^0}O}</span> : relative position vector to center of mass of link <span class=\"math math-inline\">i</span></p><p><span class=\"math math-inline\">{^i}I_i</span> : symmetric intertia matrix of link <span class=\"math math-inline\">i</span></p><p><span class=\"math math-inline\">I_{mot_i}</span> : intertia of acuator</p><p><span class=\"math math-inline\">c_{ii}</span> : viscous friction parameter</p><p><span class=\"math math-inline\">f_{ii}</span> ：dry friction parameter</p><p><strong>requirements</strong></p><ul><li>kinematics parameters (e.g. <span class=\"math math-inline\">{^i}r_{{^i}O,{^{i-1}}O}</span>)</li><li>position <span class=\"math math-inline\">q</span> and velocity <span class=\"math math-inline\">\\dot q</span> and acceleration <span class=\"math math-inline\">\\ddot q</span></li><li>joint torque <span class=\"math math-inline\">\\tau</span></li></ul><p><strong>least-squares method</strong> needs the <span class=\"math math-inline\">\\overline Y^T\\overline Y</span> to be full rank</p><div class=\"math math-display\">\\begin{aligned} \\overline \\tau &#x26;= \\overline Y\\pi \\\\ \\pi &#x26;= (\\overline Y^T\\overline Y)^{-1}\\overline Y^T\\overline\\tau \\end{aligned}</div><p><span class=\"math math-inline\">\\overline Y\\in\\mathbb R^{N|q|\\times13|q|}</span></p><p><span class=\"math math-inline\">\\overline \\tau\\in \\mathbb R^{N|q|}</span></p><p><span class=\"math math-inline\">\\pi\\in \\mathbb R^{13|q|}</span></p><p><span class=\"math math-inline\">N</span> : times of measruement</p><p><strong>dampled least squares</strong> use an initial guess <span class=\"math math-inline\">\\pi_0</span> , so the problem could be solved when <span class=\"math math-inline\">\\overline Y^T\\overline T</span> is not full rank</p><div class=\"math math-display\">\\begin{aligned} \\tilde \\tau =&#x26; \\overline Y(\\pi-\\pi_0) \\\\ \\pi=&#x26;(\\overline Y^T\\overline Y+\\lambda^2I)^{-1}\\overline Y^T\\tilde\\tau -\\pi_0 \\end{aligned}</div><p><span class=\"math math-inline\">\\lambda</span> : damping factor, the more confidence in the <span class=\"math math-inline\">\\pi_0</span>, the higher <span class=\"math math-inline\">\\lambda</span></p></li></ul><h1>Application in Dynamics</h1><p><strong>Equation of motion</strong></p><div class=\"math math-display\">M(q)\\ddot q + G(q,\\dot q)\\dot q+C_v\\dot q + F_d sgn(\\dot q)+g(q)=\\tau - J^T(q)h_e</div><p><span class=\"math math-inline\">C_v\\dot q</span> : viscous friction in the joints</p><p><span class=\"math math-inline\">F_dsgn(\\dot q)</span> : Coulomb (dry) friction in the joints</p><p><span class=\"math math-inline\">h_e</span> : end-effector generalized forces induced from environment influences</p><h2>Direct and Inverse Dynamcis</h2><h3>Torque Contribution</h3><div class=\"math math-display\">\\tau' = G(q,\\dot q)\\dot q+C_v\\dot q+F_dsgn(\\dot q)+g(q)+J^T(q)h_e</div><p><span class=\"math math-inline\">\\tau'</span> : torque contribution</p><p><strong>in <span class=\"math math-inline\">\\tau '</span> , <span class=\"math math-inline\">\\dot \\omega=0</span></strong></p><p>set <span class=\"math math-inline\">\\ddot q=0</span></p><p><img src=\"https://s2.loli.net/2022/02/13/Thgpec8RCzjoMJO.png\" alt=\"\" width=\"1344\" height=\"613\" type=\"png\" blurdataurl=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAACCAIAAADwyuo0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAI0lEQVQImWNgYGRbv379n///PXwCGYrLKm0dnX7++fvzz18AmIEN+giiRJUAAAAASUVORK5CYII=\"></p><h3>Mass Matrix</h3><div class=\"math math-display\">M(q)\\ddot q= (\\tau-\\tau')</div><p><span class=\"math math-inline\">M</span> : inertia matrix , <span class=\"math math-inline\">M\\in \\mathbb R^{|q|\\times |q|}</span></p><p><span class=\"math math-inline\">m_i</span> : <span class=\"math math-inline\">i</span>th column of <span class=\"math math-inline\">M</span></p><p><img src=\"https://s2.loli.net/2022/02/13/3TJawkXZf8hDCQG.png\" alt=\"\" width=\"1446\" height=\"661\" type=\"png\" blurdataurl=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAACCAIAAADwyuo0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAI0lEQVQImWNgYGAXExOLjYv/8/8/w6Vrtw4cPPT91+/M3EIAhVwNVhohul0AAAAASUVORK5CYII=\"></p><h2>Dynamic Scaling</h2><div class=\"math math-display\">\\tau_s(t) = \\dot r^2\\tau_s(r)+\\ddot rM(q(r)) q'(r)</div><p><span class=\"math math-inline\">r(t)</span> : scaling linear function, usually <span class=\"math math-inline\">r(t)=c1\\cdot t+c2</span></p><p><span class=\"math math-inline\">q'</span> : <span class=\"math math-inline\">q</span> derivation with respect to <span class=\"math math-inline\">r</span> <span class=\"math math-inline\">\\frac{\\partial q}{\\partial r}</span></p><h2>Dynamic Manipulability Ellipsoid</h2><img src=\"https://s2.loli.net/2022/02/13/plPXKqLR6uzCFGv.png\" style=\"zoom:50%;\" width=\"468\" height=\"453\" type=\"png\" blurdataurl=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAMklEQVQImTXBQREAIAwDwdisiShgUBIZtVEbZ6O82BXQn2wD515JSjIzu2tb3Z2kqoAHLlMeqhiNL/YAAAAASUVORK5CYII=\"><p>based on the unit norm torque ：<span class=\"math math-inline\">||\\tau||=1</span></p><div class=\"math math-display\">(\\dot v_E+J_GM^{-1}d)^T\\tilde J_G^TM^TM\\tilde J_G(\\dot v_E+J_GM^{-1}d)=1</div><p><span class=\"math math-inline\">d(q)</span> : abbreviation of <span class=\"math math-inline\">d=g(q)+J^T(q)h_e</span></p><p><span class=\"math math-inline\">\\tilde J_G^TM^TMJ_G</span> : determines the volume and principle axes of ellipsoid</p><p><span class=\"math math-inline\">-J_GM^{-1}d</span> : determines the influence of gravity and end-effector generalized forces</p><h1>Parallel Kinematics</h1><p>pros:</p><ul><li>high carrying capability</li><li>high positioning accuracy</li></ul><p>cons:</p><ul><li>small workspace</li></ul><h2>Direct and Inverse Kinematics</h2><p><img src=\"https://s2.loli.net/2022/02/13/OrYUEopKCVqZf83.png\" alt=\"\" width=\"1473\" height=\"718\" type=\"png\" blurdataurl=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAACCAIAAADwyuo0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAJUlEQVQImQEaAOX/AMbGyOrs7v///7mzrQCkpafFxcYBAACfn5vy3RBJI8GPhgAAAABJRU5ErkJggg==\"></p><h2>Velocity Mapping</h2><p><img src=\"https://s2.loli.net/2022/02/13/fdU2yrmRisLu791.png\" alt=\"\" width=\"1365\" height=\"648\" type=\"png\" blurdataurl=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAACCAIAAADwyuo0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIklEQVQImWPQ1NT6/+9/W0sLOwMDg6ysnL9/wIuXLzOzUgGCHgpGwkYp7gAAAABJRU5ErkJggg==\"></p><h2>Singularity</h2><div class=\"math math-display\">f(q,x_E)=0 \\\\ \\rightarrow_{\\partial t} B(q,x_E)\\dot q + A(q,x_E)\\dot x_E = 0</div><ul><li><p>serial singularity</p><p><span class=\"math math-inline\">B(q,x_E)</span> is singular</p></li><li><p>parallel singularity</p><p><span class=\"math math-inline\">A(q,x_E)</span> is singular</p></li><li><p>architectural singularity</p><p><span class=\"math math-inline\">f(q,x_E)=0</span> degnerate</p></li></ul><h1>Trajectory Planning</h1><p><strong>trajectory composition</strong></p><ul><li>path (geometry)<ul><li>prescribed orientation</li><li>regions of workspace that must not be reached</li></ul></li><li>timing law<ul><li>maximum velocity</li><li>maximum acceleration</li><li>total trajectory time</li></ul></li></ul><h2>Joint Space Trajectories</h2><p><strong>steps</strong></p><ol><li>Inverse Kinematics</li><li>Path Planning</li><li>Trajectory Planning</li></ol><p><strong>categories</strong></p><ul><li><p>Cubic Polynomial</p><div class=\"math math-display\">\\left[\\begin{matrix} t_{i,k}^3 &#x26; t_{i,k}^2 &#x26; t_{i,k} &#x26; 1\\\\ t_{i,k+1}^3 &#x26; t_{i,k+1}^2 &#x26; t_{i,k+1} &#x26; 1\\\\ 3t_{i,k}^2&#x26; 2t_{i,k} &#x26; 1 &#x26; 0\\\\ 3t_{i,k+1}^2&#x26; 2t_{i,k+1} &#x26; 1 &#x26; 0\\\\ \\end{matrix}\\right] \\left[\\begin{matrix} a_{i,3}\\\\a_{i,2}\\\\ a_{i,1}\\\\a_{i,0} \\end{matrix}\\right] = \\left[\\begin{matrix} q_{i,k}\\\\q_{i,k+1}\\\\ \\dot q_{i,k}\\\\\\dot q_{i,k+1}\\\\ \\end{matrix}\\right]</div><img src=\"https://s2.loli.net/2022/02/13/cHwqzBxMSmsR7Tn.png\" style=\"zoom:50%;\" width=\"675\" height=\"522\" type=\"png\" blurdataurl=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAIAAAA7ljmRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAMElEQVQImWMIDg7JzMyRkJRKz8hkYGBglJWVi09IOHjwIMPzZ8+8fXz0DAz///8PAOSlDpmlNc2cAAAAAElFTkSuQmCC\"></li><li><p>Fifth Order Polynomial</p><p><strong>finite jerk</strong></p><div class=\"math math-display\">\\left[\\begin{matrix} t_{i,k}^5 &#x26; t_{i,k}^4 &#x26; t_{i,k}^3 &#x26; t_{i,k}^2 &#x26; t_{i,k} &#x26; 1\\\\ t_{i,k+1}^5 &#x26; t_{i,k+1}^4 &#x26; t_{i,k+1}^3 &#x26; t_{i,k+1}^2 &#x26; t_{i,k+1} &#x26; 1\\\\ 5t_{i,k}^4 &#x26; 4t_{i,k}^3 &#x26; 3t_{i,k}^2 &#x26; 2t_{i,k} &#x26; 1 &#x26; 0\\\\ 5t_{i,k+1}^4 &#x26; 4t_{i,k+1}^3 &#x26; 3t_{i,k+1}^2 &#x26; 2t_{i,k+1} &#x26; 1 &#x26; 0\\\\ 20t_{i,k}^3 &#x26; 12t_{i,k}^2 &#x26; 6t_{i,k} &#x26; 2 &#x26; 0 &#x26; 0\\\\ 20t_{i,k+1}^3 &#x26; 12t_{i,k+1}^2 &#x26; 6t_{i,k+1} &#x26; 2 &#x26; 0 &#x26; 0\\\\ \\end{matrix}\\right] \\left[\\begin{matrix} a_{i,5}\\\\a_{i,4}\\\\a_{i,3}\\\\ a_{i,2}\\\\a_{i,1}\\\\a_{i,0}\\\\ \\end{matrix}\\right] = \\left[\\begin{matrix} q_{i,k}\\\\q_{i,k+1}\\\\ \\dot q_{i,k}\\\\\\dot q_{i,k+1}\\\\ \\ddot q_{i,k}\\\\\\ddot q_{i,k+1} \\end{matrix}\\right]</div><img src=\"https://s2.loli.net/2022/02/13/ZpXC9ejxyT6trIl.png\" style=\"zoom:50%;\" width=\"695\" height=\"509\" type=\"png\" blurdataurl=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAIAAAA7ljmRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAMklEQVQImQEnANj/AGxsbautrSUlJicnKQCPj5A8PT6pqqrV1dQA4N/fAAAAQ0RF////NaIReVOlPTkAAAAASUVORK5CYII=\"></li><li><p>Trapezoid Acceleration Profile</p><p><strong>finite jerk</strong></p><p><strong>mandatory</strong> : <span class=\"math math-inline\">\\dot q_{i,max}</span> , <span class=\"math math-inline\">\\ddot q_{i}</span></p><img src=\"https://s2.loli.net/2022/02/13/bJElHvQcsOPexrG.png\" style=\"zoom:50%;\" width=\"719\" height=\"599\" type=\"png\" blurdataurl=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAIAAAA7ljmRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAMElEQVQImWNgYGBmYGD+9////fv3GeJiYs1MzdauXVtZUclgb2vfWN9QVlaWl5cHACVOD7D+Kd/kAAAAAElFTkSuQmCC\"></li><li><p>Polynomials with imposed velocities</p></li></ul><div class=\"math math-display\">\\left[\\begin{matrix} t_{i,k}^3 &#x26; t_{i,k}^2 &#x26; t_{i,k} &#x26; 1\\\\ t_{i,k+1}^3 &#x26; t_{i,k+1}^2 &#x26; t_{i,k+1} &#x26; 1\\\\ 3t_{i,k}^2&#x26; 2t_{i,k} &#x26; 1 &#x26; 0\\\\ 3t_{i,k+1}^2&#x26; 2t_{i,k+1} &#x26; 1 &#x26; 0\\\\ \\end{matrix}\\right] \\left[\\begin{matrix} a_{i,3}\\\\a_{i,2}\\\\ a_{i,1}\\\\a_{i,0} \\end{matrix}\\right] = \\left[\\begin{matrix} q_{i,k}\\\\q_{i,k+1}\\\\ \\dot q_{i,k}\\\\\\dot q_{i,k+1}\\\\ \\end{matrix}\\right]</div><img src=\"https://s2.loli.net/2022/02/13/DCZYNVGzSjOwgxI.png\" style=\"zoom:50%;\" width=\"667\" height=\"550\" type=\"png\" blurdataurl=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAIAAAA7ljmRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAMElEQVQImWOQlJQUEORnZGAQEhZiWLBgwdZtW6WlZbh4eRj279////9/SwtLRycHAK5RC9BGK2sVAAAAAElFTkSuQmCC\"><p>only the continuity of the velocity but not of the acceleration is guaranteed</p><ul><li><p>Spline</p><div class=\"math math-display\">\\left[\\begin{matrix} a_{11}&#x26;a_{12}&#x26;\\cdots&#x26;0&#x26;0\\\\ a_{21}&#x26;a_{22}&#x26;\\cdots&#x26;0&#x26;0\\\\ \\vdots&#x26;\\vdots&#x26;\\ddots&#x26;\\vdots&#x26;\\vdots\\\\ 0&#x26;0&#x26;\\cdots&#x26;a_{N-1,N-1}&#x26;a_{N-1,N}\\\\ 0&#x26;0&#x26;\\cdots&#x26;a_{N,N-1} &#x26;a_{N,N} \\end{matrix}\\right] \\left[\\begin{matrix} \\ddot \\Pi_{i,2}(t_2)\\\\ \\vdots\\\\ \\ddot \\Pi_{i,N+1}(t_{N+1})\\\\ \\end{matrix}\\right] = b</div><p><span class=\"math math-inline\">\\Pi_{i,j}</span> : cubic polynomial of joint <span class=\"math math-inline\">i</span> at timestamp <span class=\"math math-inline\">j</span></p><p><img src=\"https://s2.loli.net/2022/02/13/acPJrsXe8k2n4hB.png\" alt=\"\" width=\"1078\" height=\"253\" type=\"png\" blurdataurl=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABCAIAAAB2XpiaAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAFUlEQVQImWNQVVFRVVH5//8fAwMDABcTA9cvLO3/AAAAAElFTkSuQmCC\"></p><p>initial and final conditions <span class=\"math math-inline\">q_{i,in},q_{i,fin},\\dot q_{i,in},\\dot q_{i,fin},\\ddot q_{i,in},\\ddot q_{i,fin}</span> can be imposed</p><p><strong>virtual points</strong>:</p><ul><li>locations are irrelevant</li><li>to have enough equation</li><li>max acceleration <span class=\"math math-inline\">\\ddot q</span> and velocity <span class=\"math math-inline\">\\dot q</span> will change</li></ul><p><strong>special form</strong>:</p><ul><li>solve more effciently</li></ul></li></ul><h2>Operation Space Trajectories</h2><p><strong>Frenet Frame</strong></p><div class=\"math math-display\">\\begin{aligned} t(s)&#x26;=\\frac{\\partial r_P(s)}{\\partial s} \\\\ n(s)&#x26;=\\frac{1}{||\\frac{\\partial^2r_P(s)}{\\partial s^2}||}\\frac{\\partial^2 r_P(s)}{\\partial s^2} \\\\ b(s)&#x26;=t(s)\\times n(s) \\end{aligned}</div><p><strong>examples</strong></p><ul><li><p>Rectilinear Path</p><div class=\"math math-display\">\\begin{aligned} r_P(s)&#x26;=r_{P_{start}}+\\frac{s}{||r_{P_{end}}-r_{P_{start}}||}(r_{P_{end}}-r_{P_{start}}) \\\\ t(s)&#x26;=\\frac{(r_{P_{end}}-r_{P_{start}})}{||r_{P_{end}}-r_{P_{start}}||} \\\\ n(s)&#x26;=0 \\\\ b(s)&#x26;=0 \\end{aligned}</div><p>the frenet frame is not unique here.</p></li><li><p>Circular Arc</p><div class=\"math math-display\">\\begin{aligned} {^0}e_{z,C_0} &#x26;= \\frac{ {^0}r_{P_{mid},P_{start}}\\times {^0}r_{P_{end},P_{start}}}{| {^0}r_{P_{mid},P_{start}}\\times {^0}r_{P_{end},P_{start}}|} \\\\ {^0}e_{H_1} &#x26;= \\frac{ {^0}e_{z,C_0}\\times {^0}r_{P_{mid},P_{start}} }{| {^0}e_{z,C_0}\\times {^0}r_{P_{mid},P_{start}} |} \\\\ {^0}e_{H_2} &#x26;= \\frac{ {^0}e_{z,C_0}\\times {^0}r_{P_{end},P_{start}} }{| {^0}e_{z,C_0}\\times {^0}r_{P_{end},P_{start}} |} \\end{aligned}</div><div class=\"math math-display\">\\begin{aligned} r_{P}(s)&#x26;=r_{C_O}+R_C{^C}r_{P,C_O}(s) \\\\ &#x26;=r_{C_O}+[e_{x,C_O},e_{y,C_O},e_{z,C_O}] \\left[\\begin{matrix} r_Ccos(s/r_C)\\\\ r_Csin(s/r_C)\\\\ 0 \\end{matrix}\\right] \\\\ b(s)&#x26;=e_{z,C_O} \\\\ n(s)&#x26;=R_C(\\frac{{^C}r_{P,C_O}'}{|{^C}r_{P,C_O}'|}) \\\\ t(s)&#x26;=n(s)\\times b(s) \\end{aligned}</div><p><span class=\"math math-inline\">r_{C_O}</span> : position of origin of the circle</p><p><span class=\"math math-inline\">r_C</span> : radius of the circle</p><p><span class=\"math math-inline\">{^Cr_{P,C_O}}'</span> : <span class=\"math math-inline\">\\frac{\\partial {^C}r_{P,C_O}(s)}{\\partial s}</span></p></li><li><p>Spline Path</p></li></ul><h1>[Equation]</h1><h2>[Matrix Manipulate]</h2><ul><li><p><strong>Cross Product</strong></p><div class=\"math math-display\">\\begin{aligned} \\left[\\begin{matrix}u_x\\\\u_y\\\\u_z\\end{matrix}\\right]\\cross \\left[\\begin{matrix}v_x\\\\v_y\\\\v_z\\end{matrix}\\right]&#x26;= \\left[\\begin{matrix}0&#x26;-u_z&#x26;u_y\\\\u_z&#x26;0&#x26;-u_x\\\\-u_y&#x26;u_x&#x26;0\\end{matrix}\\right] \\left[\\begin{matrix}v_x\\\\v_y\\\\v_z\\end{matrix}\\right] \\\\ &#x26;=\\left[\\begin{matrix}u_yv_z-u_zv_y\\\\u_zv_x-u_xv_z\\\\u_xv_y-u_yv_x\\end{matrix}\\right] \\end{aligned}</div></li><li><p><strong>Inverse</strong></p><div class=\"math math-display\">A^{-1} = \\frac{ \\left[\\begin{matrix} A_{11}^*&#x26;\\cdots &#x26;A_{1n}^*\\\\ \\vdots &#x26;\\ddots &#x26; \\vdots \\\\ A_{n1}^*&#x26;\\cdots &#x26; A_{nn}^*\\\\ \\end{matrix}\\right] }{|A|}</div><div class=\"math math-display\">A_{ij}^* = (-1)^{i+j}\\left|\\begin{matrix} a_{1,1}&#x26;\\cdots&#x26;a_{1,i-1}&#x26;a_{1,i+1}&#x26;\\cdots&#x26;a_{1,n}\\\\ \\vdots&#x26;\\ddots&#x26;\\vdots&#x26;\\vdots&#x26;\\ddots&#x26;\\vdots\\\\ a_{j-1,1}&#x26;\\cdots&#x26;a_{j-1,i-1}&#x26;a_{j-1,i+1}&#x26;\\cdots&#x26;a_{j-1,n}\\\\ a_{j+1,1}&#x26;\\cdots&#x26;a_{j+1,i-1}&#x26;a_{j+1,i+1}&#x26;\\cdots&#x26;a_{j+1,n}\\\\ \\vdots&#x26;\\ddots&#x26;\\vdots&#x26;\\vdots&#x26;\\ddots&#x26;\\vdots\\\\ a_{n,1}&#x26;\\cdots&#x26;a_{n,i-1}&#x26;a_{n,i+1}&#x26;\\cdots&#x26;a_{n,n} \\end{matrix}\\right|</div></li></ul><h2>[Trigonometric Functions]</h2><div class=\"math math-display\">\\begin{aligned} sin(\\alpha+\\beta) &#x26;= sin\\alpha\\cdot cos\\beta + cos\\alpha\\cdot sin\\beta \\\\ sin(\\alpha-\\beta) &#x26;= sin\\alpha\\cdot cos\\beta - cos\\alpha\\cdot sin\\beta \\\\ cos(\\alpha+\\beta) &#x26;= cos\\alpha\\cdot cos\\beta - sin\\alpha\\cdot sin\\beta\\\\ cos(\\alpha-\\beta) &#x26;= cos\\alpha\\cdot cos\\beta + sin\\alpha\\cdot sin\\beta\\\\ tan(\\alpha+\\beta) &#x26;= \\frac{ tan\\alpha + tan\\beta }{1-tan\\alpha\\cdot tan\\beta}\\\\ tan(\\alpha-\\beta) &#x26;= \\frac{ tan\\alpha - tan\\beta }{1+tan\\alpha\\cdot tan\\beta} \\end{aligned}</div><h2>[Orientation]</h2><ul><li><p><strong>RPY</strong></p><div class=\"math math-display\">\\begin{aligned} R_{RPY}&#x26;=R_z(\\varphi)R_y(\\theta)R_x(\\psi) \\\\ &#x26;=\\left[\\begin{matrix} c_\\varphi c_\\theta &#x26; c_\\varphi s_\\theta s_\\psi-s_\\varphi c_\\psi&#x26; c_\\varphi s_\\theta c_\\psi+s_\\varphi s_\\psi\\\\ s_\\varphi c_\\theta &#x26; s_\\varphi s_\\theta s_\\psi + c_\\varphi c_\\psi&#x26; s_\\varphi s_\\theta c_\\psi - c_\\varphi s_\\psi\\\\ -s_\\theta &#x26; c_\\theta s_\\psi&#x26; c_\\theta c_\\psi\\\\ \\end{matrix}\\right] \\end{aligned}</div></li><li><p><strong>Axis and Angle</strong></p><div class=\"math math-display\">R(\\theta,r)=\\left[\\begin{matrix} r_x^2(1-cos\\theta)+cos\\theta&#x26; r_xr_y(1-cos\\theta)-r_zsin\\theta&#x26; r_xr_z(1-cos\\theta)+r_ysin\\theta \\\\ r_xr_y(1-cos\\theta)+r_zsin\\theta&#x26; r_y^2(1-cos\\theta)+cos\\theta&#x26; r_yr_z(1-cos\\theta)-r_xsin\\theta \\\\ r_xr_z(1-cos\\theta)-r_ysin\\theta&#x26; r_yr_z(1-cos\\theta)+r_xsin\\theta&#x26; r_z^2(1-cos\\theta)+cos\\theta \\end{matrix}\\right]</div><div class=\"math math-display\">\\begin{aligned} cos\\theta &#x26;= \\frac{r_{11}+r_{22}+r_{33}-1}{2}\\\\ sin\\theta &#x26;= \\frac{r_{32}-r_{23}}{2r_x}\\\\ &#x26;=\\frac{r_{13}-r_{31}}{2r_y}\\\\ &#x26;=\\frac{r_{21}-r_{12}}{2r_x}\\\\ r &#x26;= \\left[\\begin{matrix} \\pm\\sqrt{\\frac{r_{11}-cos\\theta}{1-cos\\theta}}\\\\ \\pm\\sqrt{\\frac{r_{22}-cos\\theta}{1-cos\\theta}}\\\\ \\pm\\sqrt{\\frac{r_{33}-cos\\theta}{1-cos\\theta}} \\end{matrix}\\right] \\end{aligned}</div></li><li><p><strong>Unit Quaternion</strong></p><div class=\"math math-display\">\\begin{aligned} R(\\eta,\\epsilon)&#x26;=\\left\\{\\begin{matrix}2(\\eta^2+\\epsilon_x^2)-1&#x26;2(\\epsilon_x\\epsilon_y-\\eta\\epsilon_z)&#x26;2(\\epsilon_x\\epsilon_z+\\eta\\epsilon_y)\\\\2(\\epsilon_x\\epsilon_y+\\eta\\epsilon_z)&#x26;2(\\eta^2+\\epsilon_y^2)-1&#x26;2(\\epsilon_y\\epsilon_z-\\eta\\epsilon_x)\\\\2(\\epsilon_x\\epsilon_z-\\eta\\epsilon_y)&#x26;2(\\epsilon_y\\epsilon_z+\\eta\\epsilon_x)&#x26;2(\\eta^2+\\epsilon_z^2)-1\\end{matrix}\\right\\} \\end{aligned}</div><div class=\"math math-display\">\\begin{aligned} \\eta &#x26;= \\frac{1}{2}\\sqrt{r_{11}+r_{22}+r_{33}+1} \\\\ \\epsilon&#x26;=\\frac{1}{2}\\left[\\begin{matrix} sgn(r_{32}-r_{23})\\sqrt{r_{11}-r_{22}-r_{33}+1}\\\\ sgn(r_{13}-r_{31})\\sqrt{r_{22}-r_{33}-r_{11}+1}\\\\ sgn(r_{21}-r_{12})\\sqrt{r_{33}-r_{11}-r_{22}+1} \\end{matrix}\\right] \\end{aligned}</div></li></ul><h2>[Direct Kinematics]</h2><ul><li><p>DH Convention</p><div class=\"math math-display\">^iT_j=\\left\\{\\begin{matrix} cos\\delta&#x26;-sin\\delta cos\\lambda&#x26;sin\\delta sin\\lambda &#x26;lcos\\delta\\\\ sin\\delta&#x26;cos\\delta cos\\lambda&#x26;-cos\\delta sin\\lambda&#x26;lsin\\delta\\\\ 0&#x26;sin\\lambda&#x26;cos\\lambda&#x26;d\\\\ 0&#x26;0&#x26;0&#x26;1 \\end{matrix}\\right\\}</div></li></ul><h2>[Inverse Kinematics]</h2><ul><li><strong>Gradient Descend</strong><div class=\"math math-display\">q_{k+1}\\leftarrow q_k+\\alpha\\cdot J_{AP}^T(q_k)(p_d-p_e)</div></li></ul><h2>[Differential Kinematics]</h2><ul><li><p><strong>Geometric Jacobian</strong></p><div class=\"math math-display\">\\left[\\begin{matrix} \\dot J_{GP_i}\\\\ \\dot J_{GO_i} \\end{matrix}\\right]= \\begin{cases}\\begin{aligned} prismatic:&#x26; \\left[\\begin{matrix} {^0}e_{z,{^{i-1}}O}\\\\ 0 \\end{matrix}\\right] \\\\ revolute:&#x26; \\left[\\begin{matrix} {^0}e_{z,{^{i-1}}O}\\times (p_E-{^0}r_{{^{i-1}}O,{^0}O})\\\\ {^0}e_{z,{^{i-1}}O} \\end{matrix}\\right] \\end{aligned}\\end{cases}</div></li><li><p><strong>Angular Velocity</strong></p><div class=\"math math-display\">{^0}\\omega_i={^0}\\omega_{i-1}+(1-\\sigma_i){^0}R_{i-1} \\left[\\begin{matrix} 0\\\\0\\\\\\dot q_i \\end{matrix}\\right]</div></li><li><p><strong>Linear Velocity</strong></p><div class=\"math math-display\">{^0}\\dot r_{{^i}O,{^0}O}= {^0}\\dot r_{{^{i-1}}O,{^0}O}+ {^0}\\omega_i\\times {^0}r_{{^i}O,{^{i-1}}O}+ \\sigma_i{^0}R_{i-1} \\left[\\begin{matrix} 0\\\\0\\\\\\dot q_i \\end{matrix}\\right]</div></li></ul><h2>[Inverse Differential Kinematics]</h2><ul><li><p><strong>Pseudo Inverse</strong></p><div class=\"math math-display\">J^{\\textdagger} = J^T(JJ^T)^{-1}</div></li><li><p><strong>Newton Method</strong></p><div class=\"math math-display\">q_{k+1}\\leftarrow q_k + \\alpha\\cdot J_A^{\\textdagger}(\\dot x_d+(I-J^\\textdagger J)\\dot q_0)</div></li></ul><h2>[Lagrange]</h2><ul><li><p><strong>Kinematic Energy</strong></p><div class=\"math math-display\">\\begin{aligned} E_{kin,link_i}&#x26;=\\frac{1}{2}m_{link_i} {^0}\\dot r_{CG_{link_i},{^0}O}^T {^0}\\dot r_{CG_{link_i},{^0}O}+ \\frac{1}{2} {^0}\\omega_i^T {^0}R_i {^i}I_{link_i} {^0}R_i^T {^0}\\omega_i \\\\ &#x26;=\\frac{1}{2}m_{link_i} \\dot q^T J_{GP_{link_i}}^T J_{GP_{link_i}} \\dot q +\\frac{1}{2} \\dot q^T J_{GO_{link_i}}^T {^0}R_i {^i}I_{link_i} {^0}R_i^T J_{GO_{link_i}} \\dot q \\\\ E_{kin,mot_i}&#x26;=\\frac{1}{2}m_{mot_i} {^0}\\dot r_{CG_{mot_i},{^0}O}^T {^0}\\dot r_{CG_{mot_i},{^0}O}+ \\frac{1}{2} {^0}\\omega_{mot_i}^T {^0}I_{mot_i} {^0}\\omega_{mot_i} \\\\ &#x26;=\\frac{1}{2}m_{mot_i} \\dot q^T J_{GP_{mot_i}}^T J_{GP_{mot_i}} \\dot q+ \\frac{1}{2} \\dot q^T J_{GO_{mot_i}}^T {^0}R_{mot_i} {^{mot_i}}I_{mot_i} {^0}R_{mot_i}^T J_{GO_{mot_i}} \\dot q \\\\ E_{kin} &#x26;= \\sum_{i=1}^{|q|} (E_{kin,link_i}+E_{kin,mot_i}) \\end{aligned}</div></li><li><p><strong>Inertia Matrix</strong></p><div class=\"math math-display\">M(q)=\\sum_{i=1}^n(m_{link_i}J_{GP_{link_i}}^TJ_{GP_{link_i}}+ J_{GO_{link_i}}^T{^0}R_i{^i}I_{link_i}{^0}R_i^TJ_{GO_{link_i}})</div></li><li><p><strong>Geometric Jacobian for link</strong></p><div class=\"math math-display\">\\left[\\begin{matrix} J_{GP_{link_i}}\\\\ J_{GO_{link_i}} \\end{matrix}\\right]= \\left[\\begin{matrix} \\dot J_{GP1_{link_i}}&#x26;\\cdots&#x26;\\dot J_{GPi_{link_i}}&#x26;\\textbf 0&#x26;\\cdots&#x26;\\textbf 0\\\\ \\dot J_{GO1_{link_i}}&#x26;\\cdots&#x26;\\dot J_{GOi_{link_i}}&#x26;\\textbf 0&#x26;\\cdots&#x26;\\textbf 0\\\\ \\end{matrix}\\right]</div><div class=\"math math-display\">\\left[\\begin{matrix} \\dot J_{GPj_{link_i}}\\\\ \\dot J_{GOj_{link_i}} \\end{matrix}\\right]= \\begin{cases}\\begin{aligned} prismatic:&#x26; \\left[\\begin{matrix} {^0}e_{z,{^{j-1}}O}\\\\ \\textbf 0 \\end{matrix}\\right]\\\\ revolute:&#x26; \\left[\\begin{matrix} {^0}e_{z,{^{j-1}}O}\\times ({^0}r_{CG_{link_i},{^0}O}-{^0}r_{{^{j-1}}O,{^0}O}) \\\\ {^0}e_{z,{^{j-1}}O} \\end{matrix}\\right] \\end{aligned}\\end{cases}</div></li></ul><h2>[Newton-Euler]</h2><ul><li><p><strong>Angular velocity</strong></p><div class=\"math math-display\">{^i}\\omega_i &#x26;= \\begin{cases}\\begin{aligned} prismatic:&#x26; {^{i-1}}R_i^T {^{i-1}}\\omega_{i-1} \\\\ revolute:&#x26; {^{i-1}}R_i^T({^{i-1}}\\omega_{i-1}+\\left[\\begin{matrix}0\\\\0\\\\\\dot q_i\\end{matrix}\\right]) \\end{aligned}\\end{cases}</div></li><li><p><strong>Angular Acceleration</strong></p><div class=\"math math-display\">{^i}\\dot \\omega_i &#x26;= \\begin{cases}\\begin{aligned} prismatic:&#x26;{^{i-1}}R_i^T {^{i-1}}\\dot \\omega_{i-1} \\\\ revolute:&#x26; {^{i-1}}R_i^T( {^{i-1}}\\dot \\omega_{i-1}+ \\left[\\begin{matrix} 0\\\\0\\\\\\ddot q_i \\end{matrix}\\right]+ {^{i-1}}\\omega_{i-1}\\times \\left[\\begin{matrix} 0\\\\0\\\\\\dot q_i \\end{matrix}\\right] ) \\end{aligned}\\end{cases}</div></li><li><p><strong>Angular Acceleration for motor</strong></p><div class=\"math math-display\">{^{i-1}}\\dot \\omega_{mot_i}= {^{i-1}}\\dot \\omega_{i-1}+ i_{mot_i}\\ddot q_{i} {^{i-1}}e_{z,mot_i}+ i_{mot_i}\\dot q_i {^{i-1}}\\omega_{i-1}\\times {^{i-1}}e_{z,mot_i}</div></li><li><p><strong>Linear Acceleration</strong></p><div class=\"math math-display\">{^i}\\ddot r_{{^i}O,{^0}O}&#x26;= \\begin{cases}\\begin{aligned} prismatic:&#x26; {^{i-1}}R_i^T( {^{i-1}}\\ddot r_{{^{i-1}}O,{^0}O} \\left[\\begin{matrix} 0\\\\0\\\\\\ddot q_i \\end{matrix}\\right])+ 2\\dot q_i{^i}\\omega_i\\times( {^{i-1}}R_i^T {^{i-1}}e_{z,{^{i-1}}O})+ {^i}\\dot \\omega_i\\times {^i}r_{{^i}O,{^{i-1}}O}+ {^i}\\omega_i\\times( {^i}\\omega_i\\times {^i}r_{{^i}O,{^{i-1}}O} ) \\\\ revolute:&#x26; {^{i-1}}R_i^T {^{i-1}}\\ddot r_{{^{i-1}}O,{^0}O}+ {^i}\\dot \\omega_i\\times {^i}r_{{^i}O,{^{i-1}}O}+ {^i}\\omega_i\\times( {^i}\\omega_i\\times {^i}r_{{^i}O,{^{i-1}}O} ) \\end{aligned}\\end{cases}</div></li><li><p><strong>Linear Acceleration for link</strong></p><div class=\"math math-display\">{^i}\\ddot r_{CG_{link_i},{^0}O}= {^i}\\ddot r_{{^i}O,{^0}O}+ {^i}\\dot \\omega_i\\times {^i}r_{CG_{link_i},{^i}O}+ {^i}\\omega_i\\times( {^i}\\omega_i\\times {^i}r_{CG_{link_i},{^i}O} )</div></li><li><p><strong>Force</strong></p><div class=\"math math-display\">{^i}f_{i,i-1} = {^i}R_{i+1} {^{i+1}}f_{i+1,i}+ m_i {^i}\\ddot r_{CG_i,{^0}O}+ c_{vi}\\dot d_i^{i-1} e_{z,mot_i}+ F_{di} sgn(\\dot d_i) {^{i-1}}e_{z,mot_i}</div></li><li><p><strong>Moment</strong></p><div class=\"math math-display\">\\begin{aligned} {^i}\\mu_{i,i-1} &#x26;= - {^i}f_{i,i-1}\\times( {^i}r_{{^i}O,{^{i-1}}O}+ {^i}r_{CG_i,{^i}O})+ {^i}R_{i+1} {^{i+1}}\\mu_{i+1,i}+( {^i}R_{i+1} {^{i+1}}f_{i+1,i})\\times {^i}r_{CG_i,{^i}O}+ {^i}I_i {^i}\\dot \\omega_i+ {^i}\\omega_i \\times( {^i}I_i {^i}\\omega_i) \\\\ &#x26;+i_{mot_{i_1}} \\ddot q_{i+1} I_{mot_{i+1}} {^0}e_{z,mot_{i+1}}+ i_{mot_{i+1}} \\dot q_{i+1} I_{mot_{i+1}} {^0}\\omega_i\\times {^0}e_{z,mot_{i+1}}+ c_{vi}\\dot \\delta_i^{i-1} e_{z,mot_i}+ F_{di} sgn(\\dot \\delta_i) {^{i-1}}e_{z,mot_i} \\end{aligned}</div></li><li><p><strong>Torque</strong></p><div class=\"math math-display\">\\tau_i = \\begin{cases}\\begin{aligned} prismatic:&#x26; ({^{i-1}}R_{i+1})^T {^{i+1}}f_{i+1,i} {^{i-1}}e_{z,{^{i-1}}O}+ i_{mot_i}I_{mot_i} {^{i-1}}e_{z,mot_i}+ c_{vi}\\dot d_i+ F_{di}sgn(\\dot d_i) \\\\ revolute:&#x26; ({^{i-1}}R_{i+1})^T {^{i+1}}\\mu_{i+1,i} {^{i-1}}e_{z,{^{i-1}}O}+ i_{mot_i}I_{mot_i} {^{i-1}}e_{z,mot_i}+ c_{vi}\\dot d_i+ F_{di}sgn(\\dot d_i) \\end{aligned}\\end{cases}</div></li><li><p><strong>Linear Approach</strong></p><div class=\"math math-display\">\\tau = Y(q,\\dot q,\\ddot q)\\pi</div></li></ul><h2>[Application in Dynamics]</h2><ul><li><strong>Scaling Function</strong><div class=\"math math-display\">r(t)=c1\\cdot t+c2</div></li></ul><h2>[Trajectory Planning]</h2><ul><li><p><strong>RectLinear Path</strong></p><div class=\"math math-display\">r_P(s)=r_{P_{start}}+\\frac{s}{||r_{P_{end}}-r_{P_{start}}||}(r_{P_{end}}-r_{P_{start}})</div></li><li><p><strong>Circular Arc</strong></p><div class=\"math math-display\">\\begin{aligned} {^0}e_{z,C_0} &#x26;= \\frac{ {^0}r_{P_{mid},P_{start}}\\times {^0}r_{P_{end},P_{start}}}{| {^0}r_{P_{mid},P_{start}}\\times {^0}r_{P_{end},P_{start}}|} \\\\ {^0}e_{H_1} &#x26;= \\frac{ {^0}e_{z,C_0}\\times {^0}r_{P_{mid},P_{start}} }{| {^0}e_{z,C_0}\\times {^0}r_{P_{mid},P_{start}} |} \\\\ {^0}e_{H_2} &#x26;= \\frac{ {^0}e_{z,C_0}\\times {^0}r_{P_{end},P_{start}} }{| {^0}e_{z,C_0}\\times {^0}r_{P_{end},P_{start}} |} \\\\ {^0}r_{C_0,{^0}O}&#x26;= {^0}r_{P_{start},{^0}O}+ \\frac{1}{2}{^0}r_{P_{mid},P_{start}}+ h_1 {^0}e_{H_1} \\\\&#x26;= {^0}r_{P_{start},{^0}O}+ \\frac{1}{2}{^0}r_{P_{end},P_{start}}+ h_2 {^0}e_{H_2} \\end{aligned}</div></li></ul>","renderType":"md","imageProps":{"src":"https://s2.loli.net/2022/06/18/f64j5BMt8h32nPC.png","width":1800,"height":900,"type":"png","blurDataURL":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAACCAIAAADwyuo0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAI0lEQVQImWM4fXzj/59P//9//fzZJQYrLUkTZTFNSUFBBgYA2YML902CzlYAAAAASUVORK5CYII="},"language":"cn"},"__N_SSG":true}