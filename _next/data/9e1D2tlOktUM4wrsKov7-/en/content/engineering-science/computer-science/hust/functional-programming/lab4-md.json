{"pageProps":{"frontmatter":{"title":"[华科]函数式编程实验4","description":"“华中科技大学 函数式编程实验4题目与答案\"","date":"2021-4-21","image":"https://s2.loli.net/2022/06/18/BryAis3WRkCItMg.jpg"},"content":"<h1>Lab4</h1><h2>Q1</h2><p>编写函数thenAddOne，要求： 1.函数类型为: ((int ->int) * int) -> int； 2.功能为将一个整数通过函数变换(如翻倍、求平方或求阶乘)后再加1。</p><pre><code>fun double(x) = 2*x;\r\nfun square(x) = x*x;\r\nfun factorial(1) = 1  \r\n  | factorial(x) = x*factorial(x-1);\r\n\r\nfun thenAddOne (f:(int->int),x:int):int = f(x)+1;\n</code></pre><h2>Q2</h2><p>编写函数mapList，要求： 1.类型为: ((‘a -> ‘b) * ‘a list) -> ‘b list； 2.功能为实现整数集的数学变换(如翻倍、求平方或求阶乘)</p><pre><code>fun mapList(f,[]) = []\r\n  | mapList(f,x::L) = f(x)::mapList(f,L);\n</code></pre><h2>Q3</h2><p>编写函数mapList’，要求：</p><p>① 函数类型为: (‘a -> ‘b) -> (‘a list -> ‘b list)；</p><p>② 功能为实现整数集的数学变换(如翻倍、求平方或求阶乘)。</p><p>③ 比较函数mapList’和mapList，分析、体会它们有什么不同。</p><pre><code>fun mapList' (f) = \r\n\tlet\r\n\t\tfun ret [] = []\r\n\t\t  | ret (x::L) = f(x)::ret(L)\r\n\tin\r\n\t\tret\r\n\tend;\n</code></pre><h2>Q4</h2><p>编写函数： exists: (‘a -> bool) -> ‘a list -> bool forall: (‘a -> bool) -> ‘a list -> bool 对函数p: t -> bool, 整数集L: t list, 有：exist p L =>* true if there is an x in L such that p x=true; exits p L =>* false otherwise. forall p L =>* true if p x = true for every item x in L; forall p L =>* false otherwise.</p><pre><code>fun exists (f) = \r\n\tlet\r\n\t\tfun wrapper([]) = false\r\n           | wrapper(x::L)=\r\n           \t\tcase f(x) of\r\n           \t\t\ttrue => true\r\n           \t\t\t| false => wrapper(L) \r\n\tin\r\n\t\twrapper\r\n\tend;\r\n\t\r\n\t\r\nfun forAll (f) = \r\n\tlet \r\n\t\tfun wrapper([]) = true\r\n\t\t  | wrapper(x::L) = \r\n\t\t  \t\tcase f(x) of\r\n\t\t  \t\t\tfalse => false\r\n\t\t  \t\t\t| true => wrapper(L)\r\n\tin \r\n\t\twrapper\r\n\tend;\r\n\r\n\n</code></pre><h2>Q5</h2><p>编写函数： treeFilter: (‘a -> bool) -> ‘a tree -> ‘a option tree 将树中满足条件P（ ‘a -> bool ）的节点封装成option类型保留，否则替换成NONE</p><pre><code>datatype 'a tree = EMPTY | Node of 'a tree*'a*'a tree\r\ndatatype 'a option = NONE | SOME of 'a\r\n\r\nfun treeFilter (f) = \r\n\tlet\r\n\t\tfun wrapper(EMPTY) = EMPTY\r\n\t\t  | wrapper(Node(l,x,r)) = \r\n\t\t\tcase f(x) of \r\n\t\t\t\ttrue => Node(wrapper(l), SOME x, wrapper(r))\r\n\t\t\t\t| false => Node(wrapper(l), NONE, wrapper(r))\r\n\tin \r\n\t\twrapper\r\n\tend;\n</code></pre><h2>Q6</h2><p>十进制数可表示为<span class=\"math math-inline\">54_{10}</span>，而二进制数可表示为<span class=\"math math-inline\">10_{2}</span>. 其中右下标的’10’,’2’称为基数。通常，给定一个基数b和n个数字dndn-1…d1组成的字符串，该数字字符串的值可用公式计算：∑i=1nbi-1di. 如：<span class=\"math math-inline\">54_{10}=5*10^1+4*10^0=54</span>,<span class=\"math math-inline\">10_2=1*2^1+0*2^0=2. </span>同时，任意一个数可以表示成b以内数字的int list形式。如11002=[0,0,1,1], 5410=[4,5].</p><p>(1)编写高阶函数：toInt: int -> int list -> int. 对所有b>1和所有L: int list,如果L是一个b进制数的int list表示，函数toInt b L为其相应的整数值，toInt b的结果类型为：int list -> int. 如： val base2ToInt = toInt 2; val 2 = base2ToInt [0,1];</p><p>(2) 利用数学操作mod和div可以将任意十进制整数n表示成基于基数b的b进制数形式，如<span class=\"math math-inline\">42-_{10} = 132_{5}</span>。 编写高阶函数 toBase: int -> int -> int list 实现该转换：toBase b n将十进制数n转换为b进制数的int list表述形式（b>1, n≥0）。</p><p>(3)编写高阶函数 convert: int * int -> int list -> int list 对任意b1, b2 > 1和所有L: int list（L为一个b1进制数的int list表述形式），函数convert(b1, b2) L将b1进制数的int list表述L转换成b2进制数的int list表述，即满足 toInt b2 (convert(b1, b2) L) = toInt b1 L。</p><h3>(1)</h3><pre><code>fun toInt(base) = \r\n\tlet\r\n\t\tfun wrapper ([]) = 0\r\n\t\t  | wrapper (x:L) = \r\n\t\t\tlet \r\n\t\t\t\tfun pow(0)=1\r\n\t\t\t\t  | pow(n) = base*pow(n-1)\r\n\t\t\t\tval pos = pow(List.length(L))\r\n\t\t\tin\r\n\t\t\t\tpos*x + wrapper(L)\r\n\t\t\tend\r\n\tin\r\n\t\twrapper\r\n\tend;\n</code></pre><h3>（2）</h3><pre><code>fun toBase (base) = \r\n\tlet\r\n\t\tfun wrapper(0) = []\r\n\t\t  | wrapper(value) = \r\n\t\t  \tlet \r\n\t\t  \t\tval q = value div base\r\n\t\t  \t\tval p = value mod base\r\n\t\t  \tin\r\n\t\t  \t\twrapper(q)@[p]\r\n\t\t  \tend\r\n\tin\r\n\t\twrapper\r\n\tend;\n</code></pre><h3>(3)</h3><pre><code>\r\nfun convert (baseSrc, baseDst) = \r\n\tlet\r\n\t\tfun wrapper L = \r\n            let \r\n                val toIntSrc = toInt(baseSrc)\r\n                val toBaseDst = toBase(baseDst)\r\n            in\r\n                toBaseDst(toIntSrc(L))\r\n            end\r\n            \r\n\tin\r\n\t\twrapper\r\n\tend;\r\n\t\r\n\t\r\n\t\r\nfun convert (baseSrc, baseDst) = \r\n\tlet\r\n\t\tfun wrapper = toBase(baseDst, toInt(baseSrc))\r\n\tin\r\n\t\twrapper\r\n\tend;\n</code></pre>","renderType":"md","imageProps":{"src":"https://s2.loli.net/2022/06/18/BryAis3WRkCItMg.jpg","width":1920,"height":1080,"type":"jpg","blurDataURL":"data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAADAAQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAb/xAAfEAAABgEFAAAAAAAAAAAAAAAAAQIDBAURBhMhMWH/xAAUAQEAAAAAAAAAAAAAAAAAAAAG/8QAGREBAQEAAwAAAAAAAAAAAAAAAQIAERJR/9oADAMBAAIRAxEAPwCCtLl6HqC5ZZh06kFMXjdqYrpl1xlTZnjwAAN5iU5TE+9AA+b/2Q=="},"language":"en"},"__N_SSG":true}